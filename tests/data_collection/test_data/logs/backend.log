2025-04-14 16:58:15,167 - ydrpolicy.backend.mcp - INFO - Attempting to start MCP server on 0.0.0.0:8001 via http transport...
2025-04-14 16:58:15,168 - ydrpolicy.backend.mcp.server - INFO - Attempting to start MCP server using http transport...
2025-04-14 16:58:15,168 - ydrpolicy.backend.mcp.server - INFO - Running MCP server with http/sse transport via uvicorn on 0.0.0.0:8001.
2025-04-14 16:59:03,120 - ydrpolicy.backend.mcp - INFO - Attempting to start MCP server on 0.0.0.0:8001 via http transport...
2025-04-14 16:59:03,121 - ydrpolicy.backend.mcp.server - INFO - Attempting to start MCP server using http transport...
2025-04-14 16:59:03,121 - ydrpolicy.backend.mcp.server - INFO - Running MCP server with http/sse transport via uvicorn on 0.0.0.0:8001.
2025-04-14 16:59:25,171 - ydrpolicy.backend.agent - INFO - Executing agent command...
2025-04-14 16:59:25,172 - ydrpolicy.backend.agent - INFO - Agent requested mode: API
2025-04-14 16:59:25,172 - ydrpolicy.backend.agent - INFO - MCP Tool Connection: Enabled
2025-04-14 16:59:25,172 - ydrpolicy.backend.agent - INFO - Starting agent via FastAPI server on 0.0.0.0:8000 (History Enabled)...
2025-04-14 16:59:25,414 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-14 16:59:25,414 - ydrpolicy.backend.api_main - INFO - FastAPI Application Startup Initiated...
2025-04-14 16:59:25,415 - ydrpolicy.backend.api_main - INFO - Mode: Production
2025-04-14 16:59:25,415 - ydrpolicy.backend.api_main - INFO - CORS Origins Allowed: ['http://localhost:3000']
2025-04-14 16:59:25,415 - ydrpolicy.backend.api_main - INFO - Verified required directories exist.
2025-04-14 16:59:25,415 - ydrpolicy.backend.api_main - INFO - FastAPI Application Startup Complete.
2025-04-14 16:59:25,416 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 07:31:34,730 - ydrpolicy.backend.database.engine - INFO - Creating new database engine
2025-04-15 07:31:34,763 - ydrpolicy.backend.database.engine - INFO - Database engine created successfully
2025-04-15 07:31:34,763 - ydrpolicy.backend.utils.auth_utils - WARNING - JWT decoding/validation error: Not enough segments
2025-04-15 07:31:34,764 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 07:31:34,765 - ydrpolicy.backend.utils.auth_utils - WARNING - JWT decoding/validation error: Not enough segments
2025-04-15 07:31:34,765 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 07:34:10,752 - ydrpolicy.backend.routers.auth - INFO - Attempting login for user: testuser1@example.com
2025-04-15 07:34:11,010 - ydrpolicy.backend.routers.auth - INFO - Login successful, token created for user: testuser1@example.com
2025-04-15 07:34:11,017 - ydrpolicy.backend.routers.auth - INFO - Fetching details for authenticated user: testuser1@example.com
2025-04-15 07:34:36,856 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:34:36,863 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:34:44,746 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:34:44,752 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:34:49,055 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:34:49,059 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:34:49,071 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:34:49,079 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:35:04,280 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:35:04,298 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:35:04,300 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:35:05,531 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:35:05,548 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:35:05,550 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:35:08,598 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:35:08,616 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:35:08,618 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:35:18,119 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:35:18,126 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 1: Are you there?...
2025-04-15 07:35:18,129 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 1, message: 'Are you there?...'
2025-04-15 07:35:18,130 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:35:18,130 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:35:18,131 - ydrpolicy.backend.agent.mcp_connection - WARNING - MCP Host 0.0.0.0 detected, using 'localhost' for client connection.
2025-04-15 07:35:18,132 - ydrpolicy.backend.agent.mcp_connection - INFO - Initializing MCP Server connection to: http://localhost:8001/sse
2025-04-15 07:35:18,132 - ydrpolicy.backend.agent.mcp_connection - INFO - MCPServerSse instance created.
2025-04-15 07:35:18,133 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:35:18,133 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:35:18,134 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:35:18,178 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:35:18,199 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 1
2025-04-15 07:35:21,865 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 1.
2025-04-15 07:35:21,876 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 1
2025-04-15 07:35:27,831 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:35:27,848 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:35:27,851 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:01,731 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:01,737 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:04,816 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:04,821 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:06,324 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:06,329 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:06,338 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:06,339 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:32,684 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:32,690 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:35,013 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:35,017 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:37,139 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:37,143 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:38,720 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:38,724 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:41,274 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:41,277 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:48,704 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:48,708 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:58,789 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:58,796 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:58,801 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:36:58,807 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:37:06,508 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:37:06,522 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:37:06,526 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:37:07,648 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:37:07,666 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:37:07,668 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:37:26,045 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:37:26,095 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:37:26,097 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:37:30,944 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:37:30,949 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:37:30,960 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:37:30,963 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:18,794 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:18,833 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:18,834 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:40,156 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:40,165 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:41,546 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:41,549 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:41,562 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:42,838 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:45,359 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:45,364 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:45,374 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:45,376 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:47,467 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:47,481 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:52,403 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:38:52,407 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: Hey!...
2025-04-15 07:38:52,410 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'Hey!...'
2025-04-15 07:38:52,411 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:38:52,413 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:38:52,413 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:38:52,414 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:38:52,415 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:38:52,452 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:38:52,453 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'Hey!'.
2025-04-15 07:38:52,459 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 2 for user ID 2.
2025-04-15 07:38:52,459 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 2 for user 2.
2025-04-15 07:38:52,472 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:52,474 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 2
2025-04-15 07:38:52,479 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:52,482 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 2 not found or does not belong to user ID 2.
2025-04-15 07:38:52,482 - ydrpolicy.backend.routers.chat - WARNING - Chat 2 not found or not owned by user 2.
2025-04-15 07:38:52,483 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 2, user 2: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 07:38:52,509 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:38:55,053 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 2.
2025-04-15 07:38:55,061 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 2
2025-04-15 07:39:05,503 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:39:05,508 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: Do you see my message?...
2025-04-15 07:39:05,511 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'Do you see my message?...'
2025-04-15 07:39:05,512 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:39:05,513 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:39:05,514 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:39:05,514 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:39:05,515 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:39:05,601 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:39:05,601 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'Do you see my message?'.
2025-04-15 07:39:05,605 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 3 for user ID 2.
2025-04-15 07:39:05,605 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 3 for user 2.
2025-04-15 07:39:05,619 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 3
2025-04-15 07:39:05,622 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:39:05,623 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:39:05,624 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 3 not found or does not belong to user ID 2.
2025-04-15 07:39:05,624 - ydrpolicy.backend.routers.chat - WARNING - Chat 3 not found or not owned by user 2.
2025-04-15 07:39:05,624 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 3, user 2: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 07:39:05,660 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:39:09,659 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 3.
2025-04-15 07:39:09,702 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 3
2025-04-15 07:39:16,248 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:39:16,250 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:39:16,265 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:39:17,667 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:39:17,669 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:39:17,680 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:39:19,647 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:39:19,650 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:39:19,663 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:40:05,213 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:40:05,215 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:40:05,233 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:40:37,064 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:40:52,633 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:43:25,120 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:43:55,762 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:43:55,766 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:43:55,779 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:43:55,781 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:43:58,382 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:43:58,428 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:43:58,430 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:43:58,434 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:43:58,440 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:44:01,683 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:44:01,687 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: Hi...
2025-04-15 07:44:01,689 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'Hi...'
2025-04-15 07:44:01,691 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:44:01,692 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:44:01,693 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:44:01,694 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:44:01,695 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:44:01,745 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:44:01,745 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'Hi'.
2025-04-15 07:44:01,747 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:44:01,750 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 4 for user ID 2.
2025-04-15 07:44:01,751 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 4 for user 2.
2025-04-15 07:44:01,757 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:44:01,761 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:44:01,764 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 4
2025-04-15 07:44:01,769 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:44:01,771 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:44:01,772 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 4 not found or does not belong to user ID 2.
2025-04-15 07:44:01,773 - ydrpolicy.backend.routers.chat - WARNING - Chat 4 not found or not owned by user 2.
2025-04-15 07:44:01,773 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 4, user 2: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 07:44:04,915 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 4.
2025-04-15 07:44:04,922 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 4
2025-04-15 07:45:31,118 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:31,169 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:31,170 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:33,343 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:33,379 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:33,381 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:34,560 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:34,594 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:34,596 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:35,428 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:35,462 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:35,464 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:37,801 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:37,803 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:38,804 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:38,807 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:39,819 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:39,820 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:40,503 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:40,507 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:41,641 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:41,672 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:41,674 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:42,910 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:42,942 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:42,944 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:43,098 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:43,128 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:43,129 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:43,456 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:43,485 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:43,488 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:53,872 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:53,921 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:53,923 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:55,664 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:55,714 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:45:55,717 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:46:16,510 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:46:16,545 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:46:16,547 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:46:17,374 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:46:17,408 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:46:17,410 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:46:17,909 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:46:17,943 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:46:17,945 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:46:18,396 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:46:18,429 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:46:18,431 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:47:09,146 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:47:09,194 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:47:09,195 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:47:10,392 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:47:10,428 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:47:10,430 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:47:45,687 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:47:45,759 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:47:45,774 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:48:03,164 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:48:03,183 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:48:03,185 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:48:09,539 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:48:09,589 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:48:09,591 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:48:15,301 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:48:15,305 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: hi...
2025-04-15 07:48:15,307 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'hi...'
2025-04-15 07:48:15,308 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:48:15,308 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:48:15,309 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:48:15,309 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:48:15,310 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:48:15,340 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:48:15,340 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'hi'.
2025-04-15 07:48:15,343 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 5 for user ID 2.
2025-04-15 07:48:15,343 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 5 for user 2.
2025-04-15 07:48:15,356 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:48:15,356 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 5
2025-04-15 07:48:15,357 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 5 not found or does not belong to user ID 2.
2025-04-15 07:48:15,357 - ydrpolicy.backend.routers.chat - WARNING - Chat 5 not found or not owned by user 2.
2025-04-15 07:48:15,358 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 5, user 2: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 07:48:20,619 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 5.
2025-04-15 07:48:20,626 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 5
2025-04-15 07:48:40,922 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:48:40,925 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 5: can you explain to me what you can do for me?...
2025-04-15 07:48:40,927 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 5, message: 'can you explain to me what you can do for me?...'
2025-04-15 07:48:40,928 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:48:40,928 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:48:40,929 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:48:40,929 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:48:40,930 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:48:40,959 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:48:40,976 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 5
2025-04-15 07:48:43,630 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 5.
2025-04-15 07:48:43,638 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 5
2025-04-15 07:49:02,348 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:49:02,353 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 5: Do you have access to my previous message?...
2025-04-15 07:49:02,356 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 5, message: 'Do you have access to my previous message?...'
2025-04-15 07:49:02,357 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:49:02,358 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:49:02,359 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:49:02,360 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:49:02,360 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:49:02,396 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:49:02,413 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 5
2025-04-15 07:49:05,973 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 5.
2025-04-15 07:49:05,980 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 5
2025-04-15 07:49:13,959 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:49:16,286 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:49:49,385 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:49:49,390 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: Hello...
2025-04-15 07:49:49,392 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'Hello...'
2025-04-15 07:49:49,393 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:49:49,394 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:49:49,394 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:49:49,395 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:49:49,396 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:49:49,432 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:49:49,432 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'Hello'.
2025-04-15 07:49:49,437 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 6 for user ID 2.
2025-04-15 07:49:49,437 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 6 for user 2.
2025-04-15 07:49:49,450 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 6
2025-04-15 07:49:49,453 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 07:49:49,455 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 6 not found or does not belong to user ID 2.
2025-04-15 07:49:49,456 - ydrpolicy.backend.routers.chat - WARNING - Chat 6 not found or not owned by user 2.
2025-04-15 07:49:49,456 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 6, user 2: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 07:49:52,968 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 6.
2025-04-15 07:49:52,976 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 6
2025-04-15 07:50:01,516 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:50:01,520 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 6: Do you see my pprevious messages?...
2025-04-15 07:50:01,523 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 6, message: 'Do you see my pprevious messages?...'
2025-04-15 07:50:01,524 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:50:01,525 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:50:01,526 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:50:01,527 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:50:01,527 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:50:01,564 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:50:01,582 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 6
2025-04-15 07:50:04,436 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 6.
2025-04-15 07:50:04,443 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 6
2025-04-15 07:53:39,354 - ydrpolicy.backend.routers.auth - INFO - Attempting login for user: testuser2@example.com
2025-04-15 07:53:39,561 - ydrpolicy.backend.routers.auth - INFO - Login successful, token created for user: testuser2@example.com
2025-04-15 07:53:39,565 - ydrpolicy.backend.routers.auth - INFO - Fetching details for authenticated user: testuser2@example.com
2025-04-15 07:53:40,115 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:53:40,121 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:53:46,114 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:53:46,119 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:53:48,262 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:53:48,268 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:53:55,787 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:53:55,791 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: Hi! this is Pouria....
2025-04-15 07:53:55,793 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'Hi! this is Pouria....'
2025-04-15 07:53:55,795 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:53:55,796 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:53:55,796 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:53:55,797 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:53:55,798 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:53:55,839 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:53:55,839 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'Hi! this is Pouria.'.
2025-04-15 07:53:55,842 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 7 for user ID 3.
2025-04-15 07:53:55,843 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 7 for user 3.
2025-04-15 07:53:55,854 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:53:55,856 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 7
2025-04-15 07:53:55,857 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 7 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:53:55,859 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 7 not found or does not belong to user ID 3.
2025-04-15 07:53:55,860 - ydrpolicy.backend.routers.chat - WARNING - Chat 7 not found or not owned by user 3.
2025-04-15 07:53:55,860 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 7, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 07:54:00,065 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 7.
2025-04-15 07:54:00,072 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 7
2025-04-15 07:54:11,674 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:54:11,679 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 7: Can you tell me what you can do?...
2025-04-15 07:54:11,681 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 7, message: 'Can you tell me what you can do?...'
2025-04-15 07:54:11,683 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:54:11,684 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:54:11,684 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:54:11,685 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:54:11,686 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:54:11,722 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:54:11,739 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 7
2025-04-15 07:54:14,321 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 7.
2025-04-15 07:54:14,329 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 7
2025-04-15 07:54:41,325 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:54:41,327 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 7: Just tell me a joke...
2025-04-15 07:54:41,329 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 7, message: 'Just tell me a joke...'
2025-04-15 07:54:41,330 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:54:41,330 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:54:41,330 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:54:41,331 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:54:41,331 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:54:41,358 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:54:41,373 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 7
2025-04-15 07:54:48,963 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 7.
2025-04-15 07:54:48,970 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 7
2025-04-15 07:54:59,592 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:54:59,596 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 7: What was my name again?...
2025-04-15 07:54:59,599 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 7, message: 'What was my name again?...'
2025-04-15 07:54:59,600 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:54:59,601 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:54:59,601 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:54:59,602 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:54:59,602 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:54:59,637 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:54:59,654 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 7
2025-04-15 07:55:07,949 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 7.
2025-04-15 07:55:07,956 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 7
2025-04-15 07:55:37,326 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:55:37,332 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 7: What tools do you have access to?...
2025-04-15 07:55:37,335 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 7, message: 'What tools do you have access to?...'
2025-04-15 07:55:37,337 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:55:37,338 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:55:37,339 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:55:37,339 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:55:37,340 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:55:37,375 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:55:37,391 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 7
2025-04-15 07:55:41,944 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 7.
2025-04-15 07:55:41,951 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 7
2025-04-15 07:55:58,168 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:55:58,172 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 7: What day is today?...
2025-04-15 07:55:58,175 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 7, message: 'What day is today?...'
2025-04-15 07:55:58,176 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:55:58,177 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:55:58,177 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:55:58,178 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:55:58,179 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:55:58,214 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:55:58,231 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 7
2025-04-15 07:56:01,300 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 7.
2025-04-15 07:56:01,308 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 7
2025-04-15 07:58:18,014 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:58:18,049 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 7 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:58:18,051 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:58:59,499 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:59:06,280 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:59:06,285 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: Hello. Who are you?...
2025-04-15 07:59:06,287 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'Hello. Who are you?...'
2025-04-15 07:59:06,288 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:59:06,289 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:59:06,289 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:59:06,290 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:59:06,290 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:59:06,323 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:59:06,323 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'Hello. Who are you?'.
2025-04-15 07:59:06,327 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 8 for user ID 3.
2025-04-15 07:59:06,328 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 8 for user 3.
2025-04-15 07:59:06,341 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 8
2025-04-15 07:59:06,345 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:59:06,346 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 8 not found or does not belong to user ID 3.
2025-04-15 07:59:06,347 - ydrpolicy.backend.routers.chat - WARNING - Chat 8 not found or not owned by user 3.
2025-04-15 07:59:06,347 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 8, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 07:59:06,400 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:59:06,401 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 07:59:06,402 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 8 not found or does not belong to user ID 3.
2025-04-15 07:59:06,402 - ydrpolicy.backend.routers.chat - WARNING - Chat 8 not found or not owned by user 3.
2025-04-15 07:59:06,403 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 8, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 07:59:10,018 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 8.
2025-04-15 07:59:10,025 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 8
2025-04-15 07:59:21,989 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 07:59:21,993 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 8: My name is Pouria...
2025-04-15 07:59:21,995 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 8, message: 'My name is Pouria...'
2025-04-15 07:59:21,996 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 07:59:21,996 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 07:59:21,997 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 07:59:21,998 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 07:59:21,998 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 07:59:22,038 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 07:59:22,054 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 8
2025-04-15 07:59:25,111 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 8.
2025-04-15 07:59:25,116 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 8
2025-04-15 08:00:24,477 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:00:24,483 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 8: Do you know who I am?...
2025-04-15 08:00:24,485 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 8, message: 'Do you know who I am?...'
2025-04-15 08:00:24,486 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:00:24,487 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:00:24,488 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:00:24,488 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:00:24,489 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:00:24,526 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:00:24,544 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 8
2025-04-15 08:00:28,561 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 8.
2025-04-15 08:00:28,567 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 8
2025-04-15 08:01:50,092 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:01:50,178 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:01:50,180 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:02:14,869 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:02:14,896 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:02:14,897 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:02:18,796 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:02:18,801 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: Hi...
2025-04-15 08:02:18,803 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'Hi...'
2025-04-15 08:02:18,805 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:02:18,806 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:02:18,807 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:02:18,807 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:02:18,808 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:02:18,843 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:02:18,843 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'Hi'.
2025-04-15 08:02:18,847 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 9 for user ID 3.
2025-04-15 08:02:18,847 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 9 for user 3.
2025-04-15 08:02:18,861 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 9
2025-04-15 08:02:18,902 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:02:18,904 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 9 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:02:18,905 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 9 not found or does not belong to user ID 3.
2025-04-15 08:02:18,906 - ydrpolicy.backend.routers.chat - WARNING - Chat 9 not found or not owned by user 3.
2025-04-15 08:02:18,907 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 9, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:02:20,930 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 9.
2025-04-15 08:02:20,938 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 9
2025-04-15 08:03:16,611 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:03:16,616 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: Hello...
2025-04-15 08:03:16,619 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'Hello...'
2025-04-15 08:03:16,621 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:03:16,622 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:03:16,622 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:03:16,623 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:03:16,623 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:03:16,661 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:03:16,661 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'Hello'.
2025-04-15 08:03:16,665 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 10 for user ID 3.
2025-04-15 08:03:16,665 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 10 for user 3.
2025-04-15 08:03:16,679 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 10
2025-04-15 08:03:16,722 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:16,729 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:16,730 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 10 not found or does not belong to user ID 3.
2025-04-15 08:03:16,730 - ydrpolicy.backend.routers.chat - WARNING - Chat 10 not found or not owned by user 3.
2025-04-15 08:03:16,731 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 10, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:03:18,598 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 10.
2025-04-15 08:03:18,608 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 10
2025-04-15 08:03:27,438 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:27,440 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:28,305 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:28,306 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 7 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:28,348 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:28,350 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:28,355 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:28,360 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 7 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:28,363 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:29,975 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:29,977 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:30,016 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:30,018 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 7 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:30,021 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:30,027 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:30,029 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:30,935 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:30,937 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:30,979 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:30,981 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:30,987 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:30,991 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:30,995 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:31,952 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:31,953 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 9 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:31,993 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:31,995 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:32,000 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:32,006 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 9 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:32,011 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:42,301 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:42,303 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:42,339 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:42,344 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 9 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:42,351 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:42,353 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:42,357 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:43,163 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:43,165 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 9 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:43,209 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:43,211 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:43,217 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:43,221 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 9 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:43,224 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:43,989 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:44,008 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:44,011 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 9 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:44,969 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:44,972 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:45,836 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:45,838 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 9 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:45,862 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:45,864 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:45,889 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:45,904 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 9 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:45,905 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:46,869 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:46,872 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:46,891 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:46,892 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 9 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:46,931 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:46,945 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:46,946 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:50,888 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:50,890 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 7 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:50,927 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:50,928 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:50,934 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:50,938 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 7 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:50,941 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:51,909 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:51,911 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:51,952 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:51,955 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 7 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:51,960 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:51,963 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:51,964 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:53,117 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:53,119 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 9 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:53,157 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:53,159 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 8 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:53,167 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:53,170 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 9 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:53,174 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:54,464 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:54,465 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:54,504 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:54,505 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 9 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:54,509 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:54,514 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:03:54,515 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:04:22,057 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:04:22,139 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:04:22,147 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:04:36,586 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:04:44,765 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:04:44,777 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 10 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:04:44,779 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:04:47,531 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:04:47,536 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: hi...
2025-04-15 08:04:47,538 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'hi...'
2025-04-15 08:04:47,539 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:04:47,540 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:04:47,541 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:04:47,542 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:04:47,542 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:04:47,577 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:04:47,577 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'hi'.
2025-04-15 08:04:47,582 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 11 for user ID 3.
2025-04-15 08:04:47,582 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 11 for user 3.
2025-04-15 08:04:47,596 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 11
2025-04-15 08:04:47,638 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:04:47,640 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 11 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:04:47,641 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 11 not found or does not belong to user ID 3.
2025-04-15 08:04:47,641 - ydrpolicy.backend.routers.chat - WARNING - Chat 11 not found or not owned by user 3.
2025-04-15 08:04:47,642 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 11, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:04:48,172 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:04:48,197 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:04:48,199 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 11 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:04:48,201 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 11 not found or does not belong to user ID 3.
2025-04-15 08:04:48,202 - ydrpolicy.backend.routers.chat - WARNING - Chat 11 not found or not owned by user 3.
2025-04-15 08:04:48,203 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 11, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:04:50,601 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 11.
2025-04-15 08:04:50,608 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 11
2025-04-15 08:04:50,620 - ydrpolicy.backend.routers.chat - INFO - API: Finished streaming response for user 3, chat new.
2025-04-15 08:05:18,084 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:05:18,089 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:05:18,094 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 11 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:05:18,097 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:05:20,169 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:05:20,189 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:05:20,191 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 11 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:05:23,426 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:05:23,431 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: Hello...
2025-04-15 08:05:23,433 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'Hello...'
2025-04-15 08:05:23,434 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:05:23,436 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:05:23,436 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:05:23,437 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:05:23,437 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:05:23,472 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:05:23,472 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'Hello'.
2025-04-15 08:05:23,477 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 12 for user ID 3.
2025-04-15 08:05:23,478 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 12 for user 3.
2025-04-15 08:05:23,493 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 12
2025-04-15 08:05:23,531 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:05:23,532 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 12 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:05:23,533 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 12 not found or does not belong to user ID 3.
2025-04-15 08:05:23,534 - ydrpolicy.backend.routers.chat - WARNING - Chat 12 not found or not owned by user 3.
2025-04-15 08:05:23,534 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 12, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:05:24,070 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:05:24,090 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:05:24,092 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 12 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:05:24,094 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 12 not found or does not belong to user ID 3.
2025-04-15 08:05:24,095 - ydrpolicy.backend.routers.chat - WARNING - Chat 12 not found or not owned by user 3.
2025-04-15 08:05:24,096 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 12, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:05:28,091 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 12.
2025-04-15 08:05:28,099 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 12
2025-04-15 08:05:28,111 - ydrpolicy.backend.routers.chat - INFO - API: Finished streaming response for user 3, chat new.
2025-04-15 08:07:51,792 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:07:51,795 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: hu...
2025-04-15 08:07:51,797 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'hu...'
2025-04-15 08:07:51,797 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:07:51,798 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:07:51,798 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:07:51,798 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:07:51,799 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:07:51,825 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:07:51,826 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'hu'.
2025-04-15 08:07:51,828 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 13 for user ID 3.
2025-04-15 08:07:51,829 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 13 for user 3.
2025-04-15 08:07:51,842 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 13
2025-04-15 08:07:51,883 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:07:51,886 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 13 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:07:51,887 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 13 not found or does not belong to user ID 3.
2025-04-15 08:07:51,888 - ydrpolicy.backend.routers.chat - WARNING - Chat 13 not found or not owned by user 3.
2025-04-15 08:07:51,888 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 13, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:07:51,908 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:07:51,918 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:07:56,052 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 13.
2025-04-15 08:07:56,059 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 13
2025-04-15 08:07:56,071 - ydrpolicy.backend.routers.chat - INFO - API: Finished streaming response for user 3, chat new.
2025-04-15 08:09:14,328 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:14,369 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 13 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:14,381 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:23,331 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:23,382 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:23,385 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 13 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:28,884 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:28,905 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:28,907 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 13 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:29,831 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:29,853 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:29,854 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 13 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:47,554 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:47,594 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 13 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:47,597 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:48,542 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:48,575 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:48,577 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 13 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:49,502 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:49,533 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:09:49,535 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 13 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:10:53,013 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:10:53,032 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 13 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:11:13,109 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:11:13,144 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 13 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:13:12,272 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:13:12,338 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 13 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:13:23,521 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:13:23,525 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: Hello...
2025-04-15 08:13:23,528 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'Hello...'
2025-04-15 08:13:23,529 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:13:23,530 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:13:23,530 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:13:23,531 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:13:23,531 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:13:23,567 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:13:23,567 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'Hello'.
2025-04-15 08:13:23,571 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 14 for user ID 3.
2025-04-15 08:13:23,571 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 14 for user 3.
2025-04-15 08:13:23,585 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 14
2025-04-15 08:13:23,587 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 14 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:13:23,588 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 14 not found or does not belong to user ID 3.
2025-04-15 08:13:23,589 - ydrpolicy.backend.routers.chat - WARNING - Chat 14 not found or not owned by user 3.
2025-04-15 08:13:23,589 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 14, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:13:25,263 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 14.
2025-04-15 08:13:25,271 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 14
2025-04-15 08:13:32,365 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:13:32,369 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 14: Who are you?...
2025-04-15 08:13:32,371 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 14, message: 'Who are you?...'
2025-04-15 08:13:32,372 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:13:32,372 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:13:32,373 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:13:32,373 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:13:32,374 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:13:32,402 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:13:32,419 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 14
2025-04-15 08:13:34,678 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 14.
2025-04-15 08:13:34,682 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 14
2025-04-15 08:13:37,972 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:13:37,977 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 14: Hi...
2025-04-15 08:13:37,979 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 14, message: 'Hi...'
2025-04-15 08:13:37,981 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:13:37,982 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:13:37,982 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:13:37,983 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:13:37,984 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:13:38,019 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:13:38,036 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 14
2025-04-15 08:13:39,730 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 14.
2025-04-15 08:13:39,736 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 14
2025-04-15 08:16:30,305 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:16:30,362 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 14 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:17:22,274 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:17:22,328 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 14 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:17:47,829 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:17:47,868 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 14 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:18:10,832 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:18:10,836 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: hello...
2025-04-15 08:18:10,839 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'hello...'
2025-04-15 08:18:10,840 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:18:10,841 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:18:10,842 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:18:10,843 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:18:10,843 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:18:10,879 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:18:10,879 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'hello'.
2025-04-15 08:18:10,884 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 15 for user ID 3.
2025-04-15 08:18:10,884 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 15 for user 3.
2025-04-15 08:18:10,901 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 15 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:18:10,902 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 15
2025-04-15 08:18:10,902 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 15 not found or does not belong to user ID 3.
2025-04-15 08:18:10,903 - ydrpolicy.backend.routers.chat - WARNING - Chat 15 not found or not owned by user 3.
2025-04-15 08:18:10,903 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 15, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:18:12,817 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 15.
2025-04-15 08:18:12,823 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 15
2025-04-15 08:18:18,352 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:18:18,357 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 15: Hi...
2025-04-15 08:18:18,359 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 15, message: 'Hi...'
2025-04-15 08:18:18,360 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:18:18,361 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:18:18,362 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:18:18,363 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:18:18,364 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:18:18,402 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:18:18,419 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 15
2025-04-15 08:18:21,008 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 15.
2025-04-15 08:18:21,016 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 15
2025-04-15 08:18:29,278 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:18:29,284 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 15: This is Pouria. Who are you?...
2025-04-15 08:18:29,287 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 15, message: 'This is Pouria. Who are you?...'
2025-04-15 08:18:29,288 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:18:29,289 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:18:29,290 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:18:29,290 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:18:29,291 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:18:29,328 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:18:29,346 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 15
2025-04-15 08:18:33,092 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 15.
2025-04-15 08:18:33,099 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 15
2025-04-15 08:18:38,040 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:18:38,045 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 15: What can you do?...
2025-04-15 08:18:38,047 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 15, message: 'What can you do?...'
2025-04-15 08:18:38,049 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:18:38,049 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:18:38,050 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:18:38,051 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:18:38,051 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:18:38,088 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:18:38,105 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 15
2025-04-15 08:18:43,332 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 15.
2025-04-15 08:18:43,337 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 15
2025-04-15 08:20:21,550 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 15 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:23:42,333 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:23:42,335 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:23:42,336 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:24:28,106 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:24:28,107 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:24:42,865 - ydrpolicy.backend.routers.auth - INFO - Attempting login for user: testuser2@example.com
2025-04-15 08:24:43,076 - ydrpolicy.backend.routers.auth - INFO - Login successful, token created for user: testuser2@example.com
2025-04-15 08:24:43,080 - ydrpolicy.backend.routers.auth - INFO - Fetching details for authenticated user: testuser2@example.com
2025-04-15 08:24:43,147 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:24:43,158 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:24:44,169 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 15 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:24:49,606 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:24:49,611 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: hi...
2025-04-15 08:24:49,614 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'hi...'
2025-04-15 08:24:49,615 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:24:49,616 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:24:49,617 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:24:49,617 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:24:49,618 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:24:49,658 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:24:49,658 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'hi'.
2025-04-15 08:24:49,661 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 16 for user ID 3.
2025-04-15 08:24:49,662 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 16 for user 3.
2025-04-15 08:24:49,675 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 16
2025-04-15 08:24:50,679 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:24:50,681 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 16 not found or does not belong to user ID 3.
2025-04-15 08:24:50,682 - ydrpolicy.backend.routers.chat - WARNING - Chat 16 not found or not owned by user 3.
2025-04-15 08:24:50,682 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 16, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:24:51,708 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:24:51,713 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 16 not found or does not belong to user ID 3.
2025-04-15 08:24:51,714 - ydrpolicy.backend.routers.chat - WARNING - Chat 16 not found or not owned by user 3.
2025-04-15 08:24:51,715 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 16, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:24:52,177 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 16.
2025-04-15 08:24:52,185 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 16
2025-04-15 08:24:53,768 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:25:04,060 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:25:04,065 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 16: who are you?...
2025-04-15 08:25:04,068 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 16, message: 'who are you?...'
2025-04-15 08:25:04,069 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:25:04,070 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:25:04,071 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:25:04,071 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:25:04,072 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:25:04,109 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:25:04,126 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 16
2025-04-15 08:25:07,025 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 16.
2025-04-15 08:25:07,032 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 16
2025-04-15 08:25:09,947 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:25:09,952 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 16: hi...
2025-04-15 08:25:09,955 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 16, message: 'hi...'
2025-04-15 08:25:09,956 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:25:09,957 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:25:09,958 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:25:09,958 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:25:09,959 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:25:09,996 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:25:10,013 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 16
2025-04-15 08:25:13,107 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 14 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:25:13,987 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:25:14,508 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 16.
2025-04-15 08:25:14,516 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 16
2025-04-15 08:26:32,834 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:26:34,844 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:30:45,946 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:30:47,843 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:31:14,686 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:31:20,303 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:31:25,273 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:32:17,737 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:32:17,823 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:32:17,825 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:32:26,384 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:32:26,399 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:32:26,401 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:32:43,756 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:33:06,371 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:33:06,444 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:33:34,664 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:33:34,747 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:33:34,748 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:35:38,271 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:36:22,777 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:36:22,795 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:36:22,803 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:22,205 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:22,252 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:22,254 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:23,498 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:23,527 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:23,528 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:24,575 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:24,612 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:24,614 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:26,512 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:26,565 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:26,567 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:27,487 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:27,529 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:37:27,531 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:38:40,811 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:38:52,747 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:38:52,790 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:38:52,792 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:38:53,965 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:38:54,006 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:38:54,008 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:01,310 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:01,368 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:01,380 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:11,585 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:23,875 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:23,878 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:23,910 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:23,913 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:31,101 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:36,515 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:40:36,518 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: hi...
2025-04-15 08:40:36,520 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'hi...'
2025-04-15 08:40:36,521 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:40:36,522 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:40:36,522 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:40:36,523 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:40:36,524 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:40:36,560 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:40:36,560 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'hi'.
2025-04-15 08:40:36,566 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 17 for user ID 3.
2025-04-15 08:40:36,567 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 17 for user 3.
2025-04-15 08:40:36,582 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 17
2025-04-15 08:40:36,585 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:36,588 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 17 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:36,589 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 17 not found or does not belong to user ID 3.
2025-04-15 08:40:36,590 - ydrpolicy.backend.routers.chat - WARNING - Chat 17 not found or not owned by user 3.
2025-04-15 08:40:36,591 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 17, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:40:36,603 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:36,604 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 17 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:40:36,605 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 17 not found or does not belong to user ID 3.
2025-04-15 08:40:36,606 - ydrpolicy.backend.routers.chat - WARNING - Chat 17 not found or not owned by user 3.
2025-04-15 08:40:36,606 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 17, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:40:39,890 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 17.
2025-04-15 08:40:39,896 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 17
2025-04-15 08:40:45,726 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:40:45,731 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 17: This is Pouria...
2025-04-15 08:40:45,733 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 17, message: 'This is Pouria...'
2025-04-15 08:40:45,734 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:40:45,735 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:40:45,736 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:40:45,737 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:40:45,738 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:40:45,771 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:40:45,788 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 17
2025-04-15 08:40:51,584 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 17.
2025-04-15 08:40:51,592 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 17
2025-04-15 08:41:01,414 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:41:01,419 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 17: What are your tools?...
2025-04-15 08:41:01,422 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 17, message: 'What are your tools?...'
2025-04-15 08:41:01,423 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:41:01,423 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:41:01,424 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:41:01,424 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:41:01,425 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:41:01,462 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:41:01,482 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 17
2025-04-15 08:41:05,092 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 17.
2025-04-15 08:41:05,102 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 17
2025-04-15 08:42:11,130 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:42:11,132 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:42:14,832 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:42:14,834 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 17 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:44:35,556 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 17 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:44:35,559 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:45:01,541 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:45:04,311 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:45:04,316 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: hi...
2025-04-15 08:45:04,318 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'hi...'
2025-04-15 08:45:04,319 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:45:04,320 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:45:04,321 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:45:04,322 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:45:04,322 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:45:04,358 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:45:04,359 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'hi'.
2025-04-15 08:45:04,363 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 18 for user ID 3.
2025-04-15 08:45:04,363 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 18 for user 3.
2025-04-15 08:45:04,377 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 18
2025-04-15 08:45:04,381 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:45:04,382 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 18 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:45:04,383 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 18 not found or does not belong to user ID 3.
2025-04-15 08:45:04,384 - ydrpolicy.backend.routers.chat - WARNING - Chat 18 not found or not owned by user 3.
2025-04-15 08:45:04,384 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 18, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:45:04,420 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:45:04,423 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 18 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:45:04,425 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 18 not found or does not belong to user ID 3.
2025-04-15 08:45:04,427 - ydrpolicy.backend.routers.chat - WARNING - Chat 18 not found or not owned by user 3.
2025-04-15 08:45:04,429 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 18, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:45:07,971 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 18.
2025-04-15 08:45:07,977 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 18
2025-04-15 08:45:15,612 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:45:15,617 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 18: Who are you?...
2025-04-15 08:45:15,619 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 18, message: 'Who are you?...'
2025-04-15 08:45:15,620 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:45:15,621 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:45:15,622 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:45:15,623 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:45:15,623 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:45:15,659 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:45:15,676 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 18
2025-04-15 08:45:18,111 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 18.
2025-04-15 08:45:18,119 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 18
2025-04-15 08:46:15,282 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 17 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:15,284 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:20,001 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:20,003 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 18 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:20,750 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:20,752 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 17 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:21,516 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:21,518 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 16 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:24,070 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:24,072 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 15 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:24,957 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:24,960 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 14 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:25,815 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:25,818 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 12 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:26,741 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:26,744 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 11 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:28,128 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:28,167 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:28,169 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 18 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:28,178 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:29,560 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:29,596 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 18 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:46,962 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:46:46,967 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: Good morning!...
2025-04-15 08:46:46,969 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'Good morning!...'
2025-04-15 08:46:46,970 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:46:46,971 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:46:46,972 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:46:46,972 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:46:46,973 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:46:47,009 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:46:47,009 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'Good morning!'.
2025-04-15 08:46:47,014 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 19 for user ID 3.
2025-04-15 08:46:47,014 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 19 for user 3.
2025-04-15 08:46:47,028 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 19
2025-04-15 08:46:47,033 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:47,035 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 19 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:47,036 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 19 not found or does not belong to user ID 3.
2025-04-15 08:46:47,037 - ydrpolicy.backend.routers.chat - WARNING - Chat 19 not found or not owned by user 3.
2025-04-15 08:46:47,037 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 19, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:46:47,068 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:46:49,425 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 19.
2025-04-15 08:46:49,428 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 19
2025-04-15 08:47:05,583 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:47:05,659 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 19 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:47:13,040 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:47:13,044 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: Good morning!...
2025-04-15 08:47:13,047 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'Good morning!...'
2025-04-15 08:47:13,048 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:47:13,049 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:47:13,050 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:47:13,050 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:47:13,051 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:47:13,086 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:47:13,086 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'Good morning!'.
2025-04-15 08:47:13,089 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 20 for user ID 3.
2025-04-15 08:47:13,090 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 20 for user 3.
2025-04-15 08:47:13,102 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 20
2025-04-15 08:47:13,119 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:47:13,120 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 20 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:47:13,121 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 20 not found or does not belong to user ID 3.
2025-04-15 08:47:13,121 - ydrpolicy.backend.routers.chat - WARNING - Chat 20 not found or not owned by user 3.
2025-04-15 08:47:13,122 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 20, user 3: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 08:47:18,013 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 20.
2025-04-15 08:47:18,020 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 20
2025-04-15 08:48:54,722 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:48:54,799 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 20 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:48:59,810 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:48:59,814 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: Hello...
2025-04-15 08:48:59,816 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'Hello...'
2025-04-15 08:48:59,818 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:48:59,819 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:48:59,820 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:48:59,820 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:48:59,821 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:48:59,857 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:48:59,857 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'Hello'.
2025-04-15 08:48:59,860 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 21 for user ID 3.
2025-04-15 08:48:59,861 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 21 for user 3.
2025-04-15 08:48:59,874 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 21
2025-04-15 08:48:59,889 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:49:02,313 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 21.
2025-04-15 08:49:02,316 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 21
2025-04-15 08:49:02,845 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 21 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:49:09,688 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:49:09,693 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 21: Who are you?...
2025-04-15 08:49:09,695 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 21, message: 'Who are you?...'
2025-04-15 08:49:09,697 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:49:09,698 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:49:09,698 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:49:09,699 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:49:09,700 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:49:09,735 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:49:09,751 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 21
2025-04-15 08:49:12,489 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 21.
2025-04-15 08:49:12,496 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 21
2025-04-15 08:49:25,435 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:49:25,440 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 21: Can you introduce yourself?...
2025-04-15 08:49:25,442 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 21, message: 'Can you introduce yourself?...'
2025-04-15 08:49:25,443 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:49:25,445 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:49:25,446 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:49:25,446 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:49:25,447 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:49:25,485 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:49:25,502 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 21
2025-04-15 08:49:29,495 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 21.
2025-04-15 08:49:29,501 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 21
2025-04-15 08:49:38,928 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:49:38,933 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 21: What tools do you have access to?...
2025-04-15 08:49:38,936 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 21, message: 'What tools do you have access to?...'
2025-04-15 08:49:38,937 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:49:38,938 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:49:38,939 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:49:38,939 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:49:38,940 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:49:38,976 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:49:38,994 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 21
2025-04-15 08:49:41,504 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 21.
2025-04-15 08:49:41,511 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 21
2025-04-15 08:51:48,432 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:51:48,476 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 21 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:52:01,253 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:52:01,255 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: Hi!...
2025-04-15 08:52:01,257 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'Hi!...'
2025-04-15 08:52:01,258 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:52:01,258 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:52:01,259 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:52:01,259 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:52:01,260 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:52:01,289 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:52:01,289 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'Hi!'.
2025-04-15 08:52:01,294 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 22 for user ID 3.
2025-04-15 08:52:01,294 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 22 for user 3.
2025-04-15 08:52:01,311 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 22
2025-04-15 08:52:01,316 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:52:04,324 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 22.
2025-04-15 08:52:04,330 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 22
2025-04-15 08:52:04,852 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 22 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:53:35,615 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:53:35,646 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 22 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:53:51,188 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:53:51,191 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat None: Hi...
2025-04-15 08:53:51,193 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat None, message: 'Hi...'
2025-04-15 08:53:51,193 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:53:51,193 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:53:51,194 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:53:51,194 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:53:51,194 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:53:51,214 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:53:51,214 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 3 with title 'Hi'.
2025-04-15 08:53:51,216 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 23 for user ID 3.
2025-04-15 08:53:51,217 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 23 for user 3.
2025-04-15 08:53:51,231 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 23
2025-04-15 08:53:51,234 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:53:53,213 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 23.
2025-04-15 08:53:53,221 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 23
2025-04-15 08:53:54,245 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:53:54,247 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 23 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:54:08,687 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 08:54:08,692 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 3 (authenticated), chat 23: What's your name?...
2025-04-15 08:54:08,694 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 3, chat 23, message: 'What's your name?...'
2025-04-15 08:54:08,695 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 08:54:08,695 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 08:54:08,696 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 08:54:08,697 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 08:54:08,697 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 08:54:08,735 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 08:54:08,751 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 23
2025-04-15 08:54:14,386 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 23.
2025-04-15 08:54:14,394 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 23
2025-04-15 08:54:22,048 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 22 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:54:22,684 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 23 for user 3 (authenticated) (skip=0, limit=100).
2025-04-15 08:55:33,930 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:55:33,931 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:55:33,934 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:55:33,934 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:56:20,762 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:56:20,763 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:56:20,764 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:56:20,765 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:56:35,617 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:56:35,618 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:56:35,620 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:56:35,621 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:56:48,052 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:56:48,064 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:56:48,067 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:56:48,068 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:56:55,116 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:56:55,118 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:56:55,121 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:56:55,122 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:57:29,684 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:57:29,685 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:57:42,111 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:57:42,111 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:57:54,808 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:57:54,809 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:58:02,185 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:58:02,192 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:58:09,381 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:58:09,382 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:58:43,588 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:58:43,589 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:58:50,734 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:58:50,734 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:59:00,373 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:59:00,374 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:59:09,886 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:59:09,887 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:59:11,351 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:59:11,351 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:59:15,507 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:59:15,508 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:59:30,548 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:59:30,549 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 08:59:30,552 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 08:59:30,552 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 09:00:05,663 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 09:00:05,664 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 09:00:16,066 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 09:00:16,067 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 09:00:17,546 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 09:00:17,547 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 09:00:18,264 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 09:00:18,265 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 09:00:35,778 - ydrpolicy.backend.routers.auth - INFO - Attempting login for user: testuser1@example.com
2025-04-15 09:00:35,991 - ydrpolicy.backend.routers.auth - WARNING - Login failed for user: testuser1@example.com - Invalid credentials.
2025-04-15 09:02:03,806 - ydrpolicy.backend.routers.auth - INFO - Attempting login for user: testuser1@example.com
2025-04-15 09:02:04,016 - ydrpolicy.backend.routers.auth - INFO - Login successful, token created for user: testuser1@example.com
2025-04-15 09:02:04,020 - ydrpolicy.backend.routers.auth - INFO - Fetching details for authenticated user: testuser1@example.com
2025-04-15 09:02:04,088 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:04,093 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:04,112 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:04,113 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:07,289 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:23,218 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:02:23,222 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: hello...
2025-04-15 09:02:23,225 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'hello...'
2025-04-15 09:02:23,226 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:02:23,227 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:02:23,227 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:02:23,228 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:02:23,229 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:02:23,264 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:02:23,264 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'hello'.
2025-04-15 09:02:23,267 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 24 for user ID 2.
2025-04-15 09:02:23,268 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 24 for user 2.
2025-04-15 09:02:23,280 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 24
2025-04-15 09:02:23,282 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:23,285 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:23,286 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 24 not found or does not belong to user ID 2.
2025-04-15 09:02:23,286 - ydrpolicy.backend.routers.chat - WARNING - Chat 24 not found or not owned by user 2.
2025-04-15 09:02:23,287 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 24, user 2: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 09:02:23,299 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:26,300 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 24.
2025-04-15 09:02:26,307 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 24
2025-04-15 09:02:32,885 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:02:32,890 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 24: who are you?...
2025-04-15 09:02:32,892 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 24, message: 'who are you?...'
2025-04-15 09:02:32,893 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:02:32,895 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:02:32,895 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:02:32,896 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:02:32,897 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:02:32,933 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:02:32,950 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 24
2025-04-15 09:02:40,738 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 24.
2025-04-15 09:02:40,745 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 24
2025-04-15 09:02:53,101 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:53,151 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:53,154 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:55,799 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:58,867 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:02:58,871 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: Hello...
2025-04-15 09:02:58,873 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'Hello...'
2025-04-15 09:02:58,874 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:02:58,875 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:02:58,876 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:02:58,876 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:02:58,877 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:02:58,909 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:02:58,910 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'Hello'.
2025-04-15 09:02:58,913 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 25 for user ID 2.
2025-04-15 09:02:58,913 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 25 for user 2.
2025-04-15 09:02:58,926 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 25
2025-04-15 09:02:58,928 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:58,930 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:02:58,932 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 25 not found or does not belong to user ID 2.
2025-04-15 09:02:58,932 - ydrpolicy.backend.routers.chat - WARNING - Chat 25 not found or not owned by user 2.
2025-04-15 09:02:58,932 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 25, user 2: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 09:02:58,942 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:03:01,845 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 25.
2025-04-15 09:03:01,853 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 25
2025-04-15 09:03:39,890 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:03:48,113 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:04:27,749 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:04:36,077 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:04:40,001 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:04:40,006 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: hi...
2025-04-15 09:04:40,008 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'hi...'
2025-04-15 09:04:40,010 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:04:40,011 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:04:40,012 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:04:40,013 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:04:40,013 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:04:40,050 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:04:40,051 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'hi'.
2025-04-15 09:04:40,055 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 26 for user ID 2.
2025-04-15 09:04:40,055 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 26 for user 2.
2025-04-15 09:04:40,067 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:04:40,069 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 26
2025-04-15 09:04:40,071 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:04:40,073 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 26 not found or does not belong to user ID 2.
2025-04-15 09:04:40,073 - ydrpolicy.backend.routers.chat - WARNING - Chat 26 not found or not owned by user 2.
2025-04-15 09:04:40,074 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 26, user 2: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 09:04:42,075 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 26.
2025-04-15 09:04:42,082 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 26
2025-04-15 09:04:51,974 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:04:54,642 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:04:54,644 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: hi...
2025-04-15 09:04:54,646 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'hi...'
2025-04-15 09:04:54,646 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:04:54,647 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:04:54,647 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:04:54,647 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:04:54,648 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:04:54,674 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:04:54,675 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'hi'.
2025-04-15 09:04:54,677 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 27 for user ID 2.
2025-04-15 09:04:54,678 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 27 for user 2.
2025-04-15 09:04:54,692 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 27
2025-04-15 09:04:54,693 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:04:54,696 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:04:54,697 - ydrpolicy.backend.database.repository.chats - WARNING - Chat ID 27 not found or does not belong to user ID 2.
2025-04-15 09:04:54,697 - ydrpolicy.backend.routers.chat - WARNING - Chat 27 not found or not owned by user 2.
2025-04-15 09:04:54,697 - ydrpolicy.backend.routers.chat - ERROR - Error fetching messages for chat 27, user 2: 404: Chat session not found.
Traceback (most recent call last):
  File "/Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/ydrpolicy/backend/routers/chat.py", line 217, in get_chat_messages
    raise HTTPException(status_code=status.HTTP_404_NOT_FOUND, detail="Chat session not found.")
fastapi.exceptions.HTTPException: 404: Chat session not found.
2025-04-15 09:04:56,930 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 27.
2025-04-15 09:04:56,937 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 27
2025-04-15 09:05:42,195 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:05:42,229 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:05:42,242 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:05:50,982 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:05:57,123 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:06:03,393 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:06:14,557 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:06:16,418 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:06:40,515 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:06:40,521 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: hi...
2025-04-15 09:06:40,523 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'hi...'
2025-04-15 09:06:40,524 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:06:40,525 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:06:40,526 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:06:40,527 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:06:40,527 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:06:40,566 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:06:40,567 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'hi'.
2025-04-15 09:06:40,571 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 28 for user ID 2.
2025-04-15 09:06:40,572 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 28 for user 2.
2025-04-15 09:06:40,585 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 28
2025-04-15 09:06:40,595 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:06:43,636 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 28.
2025-04-15 09:06:43,643 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 28
2025-04-15 09:06:52,267 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:06:52,272 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 28: My name is pouria...
2025-04-15 09:06:52,274 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 28, message: 'My name is pouria...'
2025-04-15 09:06:52,276 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:06:52,276 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:06:52,277 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:06:52,278 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:06:52,278 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:06:52,315 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:06:52,336 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 28
2025-04-15 09:06:56,227 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 28.
2025-04-15 09:06:56,235 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 28
2025-04-15 09:07:56,642 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:07:56,654 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:07:57,639 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:07:58,337 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:07:58,348 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:09:15,953 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:09:29,012 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:09:42,894 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:10:09,621 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:10:09,626 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: hi...
2025-04-15 09:10:09,628 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'hi...'
2025-04-15 09:10:09,629 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:10:09,630 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:10:09,630 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:10:09,631 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:10:09,632 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:10:09,669 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:10:09,669 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'hi'.
2025-04-15 09:10:09,686 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 29 for user ID 2.
2025-04-15 09:10:09,687 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 29 for user 2.
2025-04-15 09:10:09,701 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:10:09,703 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 29
2025-04-15 09:10:12,340 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 29.
2025-04-15 09:10:12,347 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 29
2025-04-15 09:10:17,568 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:10:17,572 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 29: my name is pouria...
2025-04-15 09:10:17,574 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 29, message: 'my name is pouria...'
2025-04-15 09:10:17,575 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:10:17,576 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:10:17,577 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:10:17,578 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:10:17,578 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:10:17,616 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:10:17,638 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 29
2025-04-15 09:10:20,822 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 29.
2025-04-15 09:10:20,826 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 29
2025-04-15 09:10:25,212 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:10:34,446 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:10:34,451 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: Good morning. My name is Pouria....
2025-04-15 09:10:34,453 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'Good morning. My name is Pouria....'
2025-04-15 09:10:34,454 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:10:34,455 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:10:34,456 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:10:34,456 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:10:34,457 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:10:34,500 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:10:34,501 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'Good morning. My name is Pouria.'.
2025-04-15 09:10:34,505 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 30 for user ID 2.
2025-04-15 09:10:34,505 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 30 for user 2.
2025-04-15 09:10:34,515 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:10:34,518 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 30
2025-04-15 09:10:36,618 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 30.
2025-04-15 09:10:36,625 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 30
2025-04-15 09:10:48,111 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:10:48,116 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 30: What tools do you have access to?...
2025-04-15 09:10:48,118 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 30, message: 'What tools do you have access to?...'
2025-04-15 09:10:48,119 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:10:48,120 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:10:48,121 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:10:48,122 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:10:48,122 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:10:48,157 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:10:48,175 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 30
2025-04-15 09:10:52,471 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 30.
2025-04-15 09:10:52,478 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 30
2025-04-15 09:11:08,570 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:11:08,575 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 30: Can you tell me what is the Yale policy on resident shifts during high volume hours?...
2025-04-15 09:11:08,577 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 30, message: 'Can you tell me what is the Yale policy on resident shifts during high volume hours?...'
2025-04-15 09:11:08,579 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:11:08,580 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:11:08,580 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:11:08,581 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:11:08,582 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:11:08,621 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:11:08,637 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 30
2025-04-15 09:11:11,923 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='Yale policy on resident shifts during high volume ...', k=5, threshold=None
2025-04-15 09:11:12,537 - ydrpolicy.backend.database.engine - INFO - Creating new database engine
2025-04-15 09:11:12,567 - ydrpolicy.backend.database.engine - INFO - Database engine created successfully
2025-04-15 09:11:12,568 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 09:11:12,627 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 09:11:12,644 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 30
2025-04-15 09:11:12,645 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 30
2025-04-15 09:11:12,657 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 30
2025-04-15 09:11:24,212 - ydrpolicy.backend.mcp.server - INFO - Received get_policy_from_ID request for policy_id: 2
2025-04-15 09:11:24,253 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: get_policy_from_ID in chat 30
2025-04-15 09:11:24,254 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 30
2025-04-15 09:11:24,266 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 30
2025-04-15 09:11:29,179 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 30.
2025-04-15 09:11:29,187 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 30
2025-04-15 09:12:01,467 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:12:02,600 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:12:02,609 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:12:12,652 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:12:12,654 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 30: Do you have the link for this policy?...
2025-04-15 09:12:12,656 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 30, message: 'Do you have the link for this policy?...'
2025-04-15 09:12:12,657 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:12:12,658 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:12:12,658 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:12:12,659 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:12:12,659 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:12:12,690 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:12:12,706 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 30
2025-04-15 09:12:16,149 - ydrpolicy.backend.mcp.server - INFO - Received get_policy_from_ID request for policy_id: 2
2025-04-15 09:12:16,175 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: get_policy_from_ID in chat 30
2025-04-15 09:12:16,177 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 30
2025-04-15 09:12:16,189 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 30
2025-04-15 09:12:19,720 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 30.
2025-04-15 09:12:19,729 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 30
2025-04-15 09:12:45,828 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:12:49,542 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:12:49,547 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: hi...
2025-04-15 09:12:49,550 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'hi...'
2025-04-15 09:12:49,551 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:12:49,551 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:12:49,552 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:12:49,553 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:12:49,553 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:12:49,590 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:12:49,590 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'hi'.
2025-04-15 09:12:49,593 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 31 for user ID 2.
2025-04-15 09:12:49,594 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 31 for user 2.
2025-04-15 09:12:49,605 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:12:49,606 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 31
2025-04-15 09:12:52,270 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 31.
2025-04-15 09:12:52,277 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 31
2025-04-15 09:12:58,921 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:12:58,932 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:15:18,997 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:15:24,074 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:15:24,077 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: Good morning!...
2025-04-15 09:15:24,078 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'Good morning!...'
2025-04-15 09:15:24,079 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:15:24,079 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:15:24,080 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:15:24,080 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:15:24,081 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:15:24,113 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:15:24,113 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'Good morning!'.
2025-04-15 09:15:24,116 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 32 for user ID 2.
2025-04-15 09:15:24,117 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 32 for user 2.
2025-04-15 09:15:24,130 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 32
2025-04-15 09:15:24,131 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:15:27,619 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 32.
2025-04-15 09:15:27,623 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 32
2025-04-15 09:17:25,565 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:17:25,569 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 32: What is Yale's policy on resident's shifts during high volume hours?...
2025-04-15 09:17:25,572 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 32, message: 'What is Yale's policy on resident's shifts during high volume hours?...'
2025-04-15 09:17:25,573 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:17:25,574 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:17:25,575 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:17:25,576 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:17:25,576 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:17:25,614 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:17:25,631 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 32
2025-04-15 09:17:28,562 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='Yale policy on resident's shifts during high volum...', k=5, threshold=None
2025-04-15 09:17:29,070 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 09:17:29,081 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 09:17:29,100 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 32
2025-04-15 09:17:29,102 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 32
2025-04-15 09:17:29,114 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 32
2025-04-15 09:17:32,555 - ydrpolicy.backend.mcp.server - INFO - Received get_policy_from_ID request for policy_id: 2
2025-04-15 09:17:32,581 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: get_policy_from_ID in chat 32
2025-04-15 09:17:32,582 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 32
2025-04-15 09:17:32,594 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 32
2025-04-15 09:17:38,388 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 32.
2025-04-15 09:17:38,395 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 32
2025-04-15 09:18:15,090 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:18:31,080 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:18:31,084 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: What is Yale's policy on resident shifts during high volume hours?...
2025-04-15 09:18:31,086 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'What is Yale's policy on resident shifts during high volume hours?...'
2025-04-15 09:18:31,087 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:18:31,089 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:18:31,090 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:18:31,090 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:18:31,091 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:18:31,127 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:18:31,127 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'What is Yale's policy on resident shifts during high volume hours?'.
2025-04-15 09:18:31,130 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 33 for user ID 2.
2025-04-15 09:18:31,131 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 33 for user 2.
2025-04-15 09:18:31,143 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 33
2025-04-15 09:18:31,146 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:18:33,481 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='Yale policy on resident shifts during high volume ...', k=5, threshold=None
2025-04-15 09:18:33,725 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 09:18:33,736 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 09:18:33,754 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 33
2025-04-15 09:18:33,756 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 33
2025-04-15 09:18:33,768 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 33
2025-04-15 09:19:28,265 - ydrpolicy.backend.mcp.server - INFO - Received get_policy_from_ID request for policy_id: 2
2025-04-15 09:19:28,291 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: get_policy_from_ID in chat 33
2025-04-15 09:19:28,292 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 33
2025-04-15 09:19:28,303 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 33
2025-04-15 09:19:34,579 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 33.
2025-04-15 09:19:34,588 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 33
2025-04-15 09:20:34,695 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:20:37,877 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:20:37,881 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: What is Yale's policy on resident shifts during high volume hours?...
2025-04-15 09:20:37,883 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'What is Yale's policy on resident shifts during high volume hours?...'
2025-04-15 09:20:37,885 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:20:37,886 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:20:37,886 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:20:37,887 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:20:37,888 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:20:37,921 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:20:37,922 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'What is Yale's policy on resident shifts during high volume hours?'.
2025-04-15 09:20:37,925 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 34 for user ID 2.
2025-04-15 09:20:37,926 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 34 for user 2.
2025-04-15 09:20:37,937 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:20:37,938 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 34
2025-04-15 09:20:40,151 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='What is Yale's policy on resident shifts during hi...', k=5, threshold=None
2025-04-15 09:20:40,971 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 09:20:40,981 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 09:20:40,999 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 34
2025-04-15 09:20:41,001 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 34
2025-04-15 09:20:41,013 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 34
2025-04-15 09:20:44,453 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 34.
2025-04-15 09:20:44,455 - ydrpolicy.backend.services.chat_service - WARNING - Agent finished run for chat 34 successfully but produced no text content.
2025-04-15 09:20:44,459 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 34
2025-04-15 09:21:16,172 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:21:16,175 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: What is Yale's policy on resident shifts during high volume hours?...
2025-04-15 09:21:16,177 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'What is Yale's policy on resident shifts during high volume hours?...'
2025-04-15 09:21:16,178 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:21:16,180 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:21:16,181 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:21:16,181 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:21:16,182 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:21:16,211 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:21:16,211 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'What is Yale's policy on resident shifts during high volume hours?'.
2025-04-15 09:21:16,214 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 35 for user ID 2.
2025-04-15 09:21:16,214 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 35 for user 2.
2025-04-15 09:21:16,228 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 35
2025-04-15 09:21:16,236 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:21:18,269 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='Yale's policy on resident shifts during high volum...', k=5, threshold=None
2025-04-15 09:21:18,903 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 35.
2025-04-15 09:21:18,904 - ydrpolicy.backend.services.chat_service - WARNING - Agent finished run for chat 35 successfully but produced no text content.
2025-04-15 09:21:18,908 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 35
2025-04-15 09:21:19,676 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 09:21:19,686 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 09:21:21,255 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:21:21,259 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: What is Yale's policy on resident shifts during high volume hours?...
2025-04-15 09:21:21,262 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'What is Yale's policy on resident shifts during high volume hours?...'
2025-04-15 09:21:21,264 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:21:21,266 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:21:21,267 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:21:21,268 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:21:21,268 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:21:21,355 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:21:21,356 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'What is Yale's policy on resident shifts during high volume hours?'.
2025-04-15 09:21:21,376 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 36 for user ID 2.
2025-04-15 09:21:21,377 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 36 for user 2.
2025-04-15 09:21:21,409 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 36
2025-04-15 09:21:21,417 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:21:23,775 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='What is Yale's policy on resident shifts during hi...', k=5, threshold=None
2025-04-15 09:21:24,002 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 09:21:24,011 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 09:21:24,030 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 36
2025-04-15 09:21:24,032 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 36
2025-04-15 09:21:24,044 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 36
2025-04-15 09:21:31,229 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 36.
2025-04-15 09:21:31,237 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 36
2025-04-15 09:22:06,080 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:08,427 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:08,439 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:11,395 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:13,359 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:22:13,364 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: What is Yale's policy on resident shifts during high volume hours?...
2025-04-15 09:22:13,367 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'What is Yale's policy on resident shifts during high volume hours?...'
2025-04-15 09:22:13,369 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:22:13,370 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:22:13,371 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:22:13,371 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:22:13,372 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:22:13,407 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:22:13,408 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'What is Yale's policy on resident shifts during high volume hours?'.
2025-04-15 09:22:13,411 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 37 for user ID 2.
2025-04-15 09:22:13,411 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 37 for user 2.
2025-04-15 09:22:13,424 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:13,425 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 37
2025-04-15 09:22:15,053 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='Yale policy on resident shifts during high volume ...', k=5, threshold=None
2025-04-15 09:22:15,997 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 09:22:16,008 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 09:22:16,022 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 37
2025-04-15 09:22:16,023 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 37
2025-04-15 09:22:16,034 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 37
2025-04-15 09:22:24,189 - ydrpolicy.backend.mcp.server - INFO - Received get_policy_from_ID request for policy_id: 2
2025-04-15 09:22:24,214 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: get_policy_from_ID in chat 37
2025-04-15 09:22:24,215 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 37
2025-04-15 09:22:24,228 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 37
2025-04-15 09:22:24,280 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:24,290 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:25,825 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:29,476 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:29,490 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:31,414 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 37.
2025-04-15 09:22:31,421 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 37
2025-04-15 09:22:45,327 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:47,107 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:48,351 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:52,736 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:22:52,740 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: What is Yale's policy on resident shifts during high volume hours?...
2025-04-15 09:22:52,743 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'What is Yale's policy on resident shifts during high volume hours?...'
2025-04-15 09:22:52,744 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:22:52,745 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:22:52,745 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:22:52,746 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:22:52,746 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:22:52,782 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:22:52,782 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'What is Yale's policy on resident shifts during high volume hours?'.
2025-04-15 09:22:52,787 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 38 for user ID 2.
2025-04-15 09:22:52,788 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 38 for user 2.
2025-04-15 09:22:52,799 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:22:52,802 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 38
2025-04-15 09:22:56,323 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='What is Yale's policy on resident shifts during hi...', k=5, threshold=None
2025-04-15 09:22:56,921 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 09:22:56,931 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 09:22:56,949 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 38
2025-04-15 09:22:56,950 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 38
2025-04-15 09:22:56,962 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 38
2025-04-15 09:23:09,555 - ydrpolicy.backend.mcp.server - INFO - Received get_policy_from_ID request for policy_id: 2
2025-04-15 09:23:09,579 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: get_policy_from_ID in chat 38
2025-04-15 09:23:09,580 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 38
2025-04-15 09:23:09,591 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 38
2025-04-15 09:23:18,063 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 38.
2025-04-15 09:23:18,071 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 38
2025-04-15 09:25:07,841 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 09:25:07,843 - ydrpolicy.backend.api_main - INFO - FastAPI Application Shutdown Initiated...
2025-04-15 09:25:07,844 - ydrpolicy.backend.agent.mcp_connection - INFO - Closing MCP server connection...
2025-04-15 09:25:07,845 - ydrpolicy.backend.agent.mcp_connection - INFO - MCP server connection closed.
2025-04-15 09:25:07,845 - ydrpolicy.backend.database.engine - INFO - Closing database connection pool
2025-04-15 09:25:07,855 - ydrpolicy.backend.database.engine - INFO - Database connection pool closed
2025-04-15 09:25:07,857 - ydrpolicy.backend.api_main - INFO - FastAPI Application Shutdown Complete.
2025-04-15 09:25:07,858 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 09:25:11,760 - ydrpolicy.backend.agent - INFO - Executing agent command...
2025-04-15 09:25:11,761 - ydrpolicy.backend.agent - INFO - Agent requested mode: API
2025-04-15 09:25:11,761 - ydrpolicy.backend.agent - INFO - MCP Tool Connection: Enabled
2025-04-15 09:25:11,761 - ydrpolicy.backend.agent - INFO - Starting agent via FastAPI server on 0.0.0.0:8000 (History Enabled)...
2025-04-15 09:25:12,057 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 09:25:12,057 - ydrpolicy.backend.api_main - INFO - FastAPI Application Startup Initiated...
2025-04-15 09:25:12,058 - ydrpolicy.backend.api_main - INFO - Mode: Production
2025-04-15 09:25:12,058 - ydrpolicy.backend.api_main - INFO - CORS Origins Allowed: ['http://localhost:3000']
2025-04-15 09:25:12,058 - ydrpolicy.backend.api_main - INFO - Verified required directories exist.
2025-04-15 09:25:12,058 - ydrpolicy.backend.api_main - INFO - FastAPI Application Startup Complete.
2025-04-15 09:25:12,059 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 09:25:14,076 - ydrpolicy.backend.database.engine - INFO - Creating new database engine
2025-04-15 09:25:14,092 - ydrpolicy.backend.database.engine - INFO - Database engine created successfully
2025-04-15 09:25:14,111 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:25:17,846 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:25:17,852 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: What is Yale's policy on resident shifts during high volume hours?...
2025-04-15 09:25:17,855 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'What is Yale's policy on resident shifts during high volume hours?...'
2025-04-15 09:25:17,856 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:25:17,856 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:25:17,857 - ydrpolicy.backend.agent.mcp_connection - WARNING - MCP Host 0.0.0.0 detected, using 'localhost' for client connection.
2025-04-15 09:25:17,858 - ydrpolicy.backend.agent.mcp_connection - INFO - Initializing MCP Server connection to: http://localhost:8001/sse
2025-04-15 09:25:17,858 - ydrpolicy.backend.agent.mcp_connection - INFO - MCPServerSse instance created.
2025-04-15 09:25:17,859 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:25:17,859 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:25:17,860 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:25:17,893 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:25:17,894 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'What is Yale's policy on resident shifts during high volume hours?'.
2025-04-15 09:25:17,900 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 39 for user ID 2.
2025-04-15 09:25:17,900 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 39 for user 2.
2025-04-15 09:25:17,916 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 39
2025-04-15 09:25:17,943 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:25:21,753 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='resident shifts during high volume hours policy Ya...', k=5, threshold=None
2025-04-15 09:25:22,000 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 09:25:22,012 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 09:25:22,033 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 39
2025-04-15 09:25:22,035 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 39
2025-04-15 09:25:22,048 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 39
2025-04-15 09:25:29,307 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='resident shifts high volume hours policy Yale radi...', k=5, threshold=None
2025-04-15 09:25:30,090 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 09:25:30,101 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 09:25:30,121 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 39
2025-04-15 09:25:30,122 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 39
2025-04-15 09:25:30,134 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 39
2025-04-15 09:25:33,425 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='resident shift high volume hours scheduling policy...', k=5, threshold=None
2025-04-15 09:25:34,040 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 09:25:34,050 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 09:25:34,070 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 39
2025-04-15 09:25:34,072 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 39
2025-04-15 09:25:34,084 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 39
2025-04-15 09:25:46,224 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 39.
2025-04-15 09:25:46,235 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 39
2025-04-15 09:30:04,721 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 09:30:04,723 - ydrpolicy.backend.api_main - INFO - FastAPI Application Shutdown Initiated...
2025-04-15 09:30:04,724 - ydrpolicy.backend.agent.mcp_connection - INFO - Closing MCP server connection...
2025-04-15 09:30:04,725 - ydrpolicy.backend.agent.mcp_connection - INFO - MCP server connection closed.
2025-04-15 09:30:04,726 - ydrpolicy.backend.database.engine - INFO - Closing database connection pool
2025-04-15 09:30:04,734 - ydrpolicy.backend.database.engine - INFO - Database connection pool closed
2025-04-15 09:30:04,735 - ydrpolicy.backend.api_main - INFO - FastAPI Application Shutdown Complete.
2025-04-15 09:30:04,736 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 09:30:08,813 - ydrpolicy.backend.agent - INFO - Executing agent command...
2025-04-15 09:30:08,813 - ydrpolicy.backend.agent - INFO - Agent requested mode: API
2025-04-15 09:30:08,813 - ydrpolicy.backend.agent - INFO - MCP Tool Connection: Enabled
2025-04-15 09:30:08,813 - ydrpolicy.backend.agent - INFO - Starting agent via FastAPI server on 0.0.0.0:8000 (History Enabled)...
2025-04-15 09:30:09,047 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 09:30:09,048 - ydrpolicy.backend.api_main - INFO - FastAPI Application Startup Initiated...
2025-04-15 09:30:09,048 - ydrpolicy.backend.api_main - INFO - Mode: Production
2025-04-15 09:30:09,048 - ydrpolicy.backend.api_main - INFO - CORS Origins Allowed: ['http://localhost:3000']
2025-04-15 09:30:09,048 - ydrpolicy.backend.api_main - INFO - Verified required directories exist.
2025-04-15 09:30:09,049 - ydrpolicy.backend.api_main - INFO - FastAPI Application Startup Complete.
2025-04-15 09:30:09,049 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 09:34:07,087 - ydrpolicy.backend.database.engine - INFO - Creating new database engine
2025-04-15 09:34:07,112 - ydrpolicy.backend.database.engine - INFO - Database engine created successfully
2025-04-15 09:34:07,113 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 09:34:07,114 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 09:34:07,117 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 09:34:07,117 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 09:34:08,290 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 09:34:08,291 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 09:34:08,301 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 09:34:08,302 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 09:34:09,853 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 09:34:09,854 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 09:34:09,865 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 09:34:09,868 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 09:34:18,999 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 09:34:18,999 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 09:34:42,088 - ydrpolicy.backend.routers.auth - INFO - Attempting login for user: testuser1@example.com
2025-04-15 09:34:42,330 - ydrpolicy.backend.routers.auth - INFO - Login successful, token created for user: testuser1@example.com
2025-04-15 09:34:42,334 - ydrpolicy.backend.routers.auth - INFO - Fetching details for authenticated user: testuser1@example.com
2025-04-15 09:34:42,402 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:42,411 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:44,790 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:44,812 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:47,423 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:47,433 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:49,971 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:49,985 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:53,607 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:53,620 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:55,240 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:55,252 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:56,518 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:56,529 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:58,375 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:58,381 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:59,571 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:34:59,582 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:35:00,655 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:35:00,666 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:35:08,121 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:35:10,970 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:35:10,984 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:35:15,248 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:35:20,934 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:35:20,940 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: What is Yale's policy on resident shifts during high volume hours?...
2025-04-15 09:35:20,942 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'What is Yale's policy on resident shifts during high volume hours?...'
2025-04-15 09:35:20,944 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:35:20,944 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:35:20,945 - ydrpolicy.backend.agent.mcp_connection - WARNING - MCP Host 0.0.0.0 detected, using 'localhost' for client connection.
2025-04-15 09:35:20,945 - ydrpolicy.backend.agent.mcp_connection - INFO - Initializing MCP Server connection to: http://localhost:8001/sse
2025-04-15 09:35:20,946 - ydrpolicy.backend.agent.mcp_connection - INFO - MCPServerSse instance created.
2025-04-15 09:35:20,947 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:35:20,947 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:35:20,948 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:35:20,983 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:35:20,983 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'What is Yale's policy on resident shifts during high volume hours?'.
2025-04-15 09:35:20,990 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 40 for user ID 2.
2025-04-15 09:35:20,990 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 40 for user 2.
2025-04-15 09:35:21,004 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:35:21,007 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 40
2025-04-15 09:35:23,661 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='Yale policy on resident shifts during high volume ...', k=5, threshold=None
2025-04-15 09:35:24,578 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 09:35:24,587 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 09:35:24,601 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 40
2025-04-15 09:35:24,602 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 40
2025-04-15 09:35:24,614 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 40
2025-04-15 09:35:30,420 - ydrpolicy.backend.mcp.server - INFO - Received get_policy_from_ID request for policy_id: 2
2025-04-15 09:35:30,444 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: get_policy_from_ID in chat 40
2025-04-15 09:35:30,445 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 40
2025-04-15 09:35:30,458 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 40
2025-04-15 09:35:39,912 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 40.
2025-04-15 09:35:39,922 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 40
2025-04-15 09:36:45,332 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:36:45,335 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 40: What tools do you have available?...
2025-04-15 09:36:45,337 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 40, message: 'What tools do you have available?...'
2025-04-15 09:36:45,338 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:36:45,339 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:36:45,339 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:36:45,340 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:36:45,341 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:36:45,376 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:36:45,394 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 40
2025-04-15 09:36:50,116 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 40.
2025-04-15 09:36:50,124 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 40
2025-04-15 09:37:07,719 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:07,727 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:35,547 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:35,553 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:35,560 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:37,820 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:39,955 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:39,969 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:40,866 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:40,877 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:41,772 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:41,785 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:43,956 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:43,961 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:53,520 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:53,524 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:55,894 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:37:55,897 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:39:20,170 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:39:20,174 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:39:20,921 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:39:20,928 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:39:22,952 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:39:22,956 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:39:24,513 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:39:24,518 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:39:25,242 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:39:25,248 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,481 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,487 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,494 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,496 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,503 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,505 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,508 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,510 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,510 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,512 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,513 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,525 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,526 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,526 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,528 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,529 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,535 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,536 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,537 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,538 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,539 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,541 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,544 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,545 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,546 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,547 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,548 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,554 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,554 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,555 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,556 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,557 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,562 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,563 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,563 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,564 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,565 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,570 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,571 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,572 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,572 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,573 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,573 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,578 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,579 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,581 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,582 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:05,584 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,359 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,366 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,374 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,376 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,377 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,379 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,381 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,387 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,387 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,390 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,391 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,391 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,393 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,397 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,398 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,400 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,401 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,403 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,407 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,408 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,408 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,410 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,411 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,413 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,417 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,418 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,419 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,420 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,421 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,424 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,428 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,430 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,431 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,434 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,436 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,439 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,443 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,444 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,444 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,446 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,448 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,452 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,454 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,455 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,456 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,457 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,459 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,462 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,463 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,471 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,472 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,472 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,473 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,474 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,479 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,480 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,480 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,481 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,481 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,487 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,488 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,489 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,489 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,490 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,491 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,533 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,533 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,534 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,534 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,535 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,538 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:11,540 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:18,485 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,543 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,550 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,560 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,561 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,561 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,562 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,562 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,570 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,572 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,573 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,574 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,574 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,578 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,583 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,583 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,584 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,585 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,587 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,592 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,594 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,594 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,595 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,596 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,598 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,604 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,604 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,605 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,606 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,606 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,608 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,613 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,613 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,614 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,615 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,618 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,619 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,624 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,624 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,625 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,626 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,628 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,628 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,633 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,633 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,634 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,635 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,637 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:36,638 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,414 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,420 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,435 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,436 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,437 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,438 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,441 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,447 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,447 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,448 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,448 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,451 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,452 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,456 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,457 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,458 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,459 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,462 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,465 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,467 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,467 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,468 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,469 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,472 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,476 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,476 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,477 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,478 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,478 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,482 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,486 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,487 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,488 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,489 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,492 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,496 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,499 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,499 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,500 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,500 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,504 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,506 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,509 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,509 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,510 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,510 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,513 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,516 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,517 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,529 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,529 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,530 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,530 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,531 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,537 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,538 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,538 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,539 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,540 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,544 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,545 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,546 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,546 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,547 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,548 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,553 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,554 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,555 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,555 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,556 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,558 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:40,560 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,377 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,383 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,389 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,391 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,394 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,395 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,399 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,403 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,404 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,406 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,408 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,410 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,411 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,415 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,417 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,418 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,419 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,421 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,425 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,426 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,427 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,428 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,430 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,431 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,436 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,437 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,437 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,438 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,439 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,441 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,445 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,446 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,448 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,452 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,455 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,458 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,463 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,464 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,464 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,465 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,468 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,469 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,473 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,473 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,474 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,474 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,477 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:52,478 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:58,966 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:58,971 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:58,987 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:58,988 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:58,990 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:58,990 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:58,991 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:58,997 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:58,998 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:58,999 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,000 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,001 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,006 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,008 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,010 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,010 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,011 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,011 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,018 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,019 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,019 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,020 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,021 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,024 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,027 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,028 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,028 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,030 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,030 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,033 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,038 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,039 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,040 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,040 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,041 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,044 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,047 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,048 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,049 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,050 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,053 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,055 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,058 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,058 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,059 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,060 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,062 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:40:59,063 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,452 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,459 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,494 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,497 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,499 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,500 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,502 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,513 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,514 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,515 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,516 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,517 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,521 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,526 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,527 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,528 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,529 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,530 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,538 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,539 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,540 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,541 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,541 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,546 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:00,549 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,039 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,050 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,058 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,059 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,059 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,060 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,063 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,069 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,070 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,070 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,071 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,073 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,074 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,079 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,080 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,081 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,084 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,085 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,088 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,090 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,091 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,091 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,093 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,094 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,098 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,099 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,100 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,101 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,103 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,104 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,108 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,109 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,110 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,111 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,113 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,114 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,119 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,121 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,122 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,122 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,124 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,124 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,128 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,129 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,130 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,132 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,132 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:41:22,134 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,093 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,097 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,105 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,111 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,112 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,113 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,113 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,119 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,122 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,123 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,124 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,125 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,128 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,130 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,134 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,135 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,136 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,138 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,141 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,144 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,145 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,146 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,146 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,149 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,153 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,155 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,156 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,156 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,157 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,159 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,163 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,168 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,169 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,170 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,172 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,173 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,176 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,179 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,179 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,180 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,183 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,184 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,186 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,189 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,189 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,190 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,192 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,193 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,195 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,196 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,210 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,211 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,212 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,213 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,214 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,221 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,222 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,222 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,224 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,226 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,230 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,237 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,238 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,238 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,239 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,239 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,247 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,249 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,249 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,250 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,251 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,255 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:19,258 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,384 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,399 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,414 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,417 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,418 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,419 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,420 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,432 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,433 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,434 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,435 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,436 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,440 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,446 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,447 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,448 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,449 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,453 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,458 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,459 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,460 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,461 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,461 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,464 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:22,468 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,676 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,703 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,704 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,705 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,706 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,707 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,723 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,724 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,724 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,725 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,725 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,728 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,735 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,736 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,736 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,737 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,739 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,743 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,744 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,745 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,745 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,746 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,750 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,753 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,754 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,759 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,760 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,761 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,762 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,762 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,771 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,772 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,773 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,773 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,774 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,776 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,780 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,780 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,781 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,782 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,784 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,788 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,788 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,789 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,789 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,790 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,793 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,795 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,796 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,803 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,804 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,805 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,806 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,807 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,812 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,813 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,814 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,814 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,817 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,821 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,822 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,823 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,824 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,824 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,826 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,831 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,832 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,833 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,833 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,836 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,837 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:24,839 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,857 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,884 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,886 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,887 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,887 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,888 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,903 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,904 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,904 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,905 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,906 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,908 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,913 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,914 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,915 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,916 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,919 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,924 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,924 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,925 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,926 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,927 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,928 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:28,933 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,201 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,216 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,239 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,248 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,250 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,252 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,254 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,263 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,264 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,266 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,266 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,268 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,270 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,277 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,278 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,279 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,279 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,282 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,288 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,289 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,290 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,291 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,292 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,292 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:36,297 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,156 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,179 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,188 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,190 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,192 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,195 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,200 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,205 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,206 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,207 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,208 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,209 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,211 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,218 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,219 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,220 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,222 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,223 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,224 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,229 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,230 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,231 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,233 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:43:51,234 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,372 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:44:10,376 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: Hi this is pouria...
2025-04-15 09:44:10,378 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'Hi this is pouria...'
2025-04-15 09:44:10,379 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:44:10,380 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:44:10,381 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:44:10,381 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:44:10,382 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:44:10,420 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:44:10,421 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'Hi this is pouria'.
2025-04-15 09:44:10,425 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 41 for user ID 2.
2025-04-15 09:44:10,425 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 41 for user 2.
2025-04-15 09:44:10,439 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 41
2025-04-15 09:44:10,440 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,454 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,455 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,457 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,458 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,462 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,463 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,465 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,466 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,468 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,472 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,472 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,475 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,475 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,479 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,480 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,482 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,483 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,484 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,489 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,490 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,491 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,491 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:10,492 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:44:16,666 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 41.
2025-04-15 09:44:16,677 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 41
2025-04-15 09:45:38,267 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,275 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,280 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,282 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,284 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,284 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,293 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,295 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,296 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,298 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,299 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,304 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,308 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,308 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,309 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,310 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,310 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,317 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,322 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,324 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,325 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,325 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,328 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,332 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,336 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,337 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,338 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,338 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,340 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,342 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,346 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,348 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,349 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,350 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,353 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,354 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,358 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,358 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,359 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,359 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,363 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,364 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,367 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,368 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,369 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,370 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,373 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,374 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,376 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:38,376 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,416 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,423 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,440 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,441 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,441 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,442 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,443 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,451 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,452 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,453 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,454 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,455 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,457 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,462 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,463 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,464 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,465 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,466 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,473 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,474 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,475 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,475 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,476 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,483 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,483 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,484 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,485 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,487 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,491 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,492 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,493 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,493 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,494 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,496 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,501 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,502 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,503 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,505 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,507 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,508 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,515 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,516 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,517 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,520 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,521 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,522 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,526 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,526 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,527 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,529 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,531 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,532 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,546 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,547 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,548 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,549 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,550 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,556 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,557 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,558 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,558 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,559 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,561 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,566 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,566 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,567 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,567 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,568 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,574 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,575 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,575 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,576 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,577 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,581 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,582 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:45:41,585 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,196 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,231 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,232 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,234 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,234 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,235 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,243 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,244 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,244 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,245 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,245 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,250 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,253 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,254 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,255 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,255 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,257 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,269 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,270 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,271 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,271 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,272 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,280 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,280 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:35,285 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,020 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,062 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,067 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,068 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,069 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,070 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,087 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,092 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,093 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,093 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,094 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,095 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,103 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,105 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,106 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,107 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,108 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,111 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,117 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,120 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,121 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,121 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,122 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,125 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:46:54,128 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,617 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,650 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,651 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,653 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,658 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,659 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,676 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,677 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,678 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,678 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,680 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,683 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,690 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,690 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,692 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,693 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,693 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,705 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,707 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,707 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,709 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,710 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,710 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,721 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,722 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,723 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,736 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,739 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,742 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,752 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,754 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,761 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,761 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,762 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,762 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,763 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,768 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,772 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,773 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,774 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,774 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,776 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,783 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,783 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,784 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,784 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,785 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,787 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,791 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,791 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,792 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,800 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,801 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,802 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,802 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,803 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,809 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,809 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,810 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,810 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,811 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,862 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,863 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,864 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,866 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,868 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,870 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,877 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,877 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,878 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,879 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,884 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,891 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,892 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:47:53,896 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:48:23,382 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:48:23,388 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 38: What is Yale policy on resident shifts during high voulme hours?...
2025-04-15 09:48:23,390 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 38, message: 'What is Yale policy on resident shifts during high voulme hours?...'
2025-04-15 09:48:23,391 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:48:23,392 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:48:23,393 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:48:23,394 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:48:23,394 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:48:23,428 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:48:23,448 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 38
2025-04-15 09:48:33,300 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 38.
2025-04-15 09:48:33,307 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 38
2025-04-15 09:49:20,330 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,359 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,361 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,361 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,362 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,370 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,377 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,378 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,378 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,379 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,379 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,382 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,388 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,388 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,389 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,391 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,393 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,395 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,399 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,400 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,401 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,401 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,402 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,405 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:20,408 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,481 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 09:49:22,485 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat None: What is Yale policy on resident shifts during high voulme hours?...
2025-04-15 09:49:22,488 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat None, message: 'What is Yale policy on resident shifts during high voulme hours?...'
2025-04-15 09:49:22,489 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 09:49:22,490 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 09:49:22,491 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 09:49:22,492 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 09:49:22,492 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 09:49:22,528 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 09:49:22,528 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'What is Yale policy on resident shifts during high voulme hours?'.
2025-04-15 09:49:22,534 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 42 for user ID 2.
2025-04-15 09:49:22,534 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 42 for user 2.
2025-04-15 09:49:22,546 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,550 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 42
2025-04-15 09:49:22,560 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,561 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,562 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,562 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,569 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,570 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,570 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,571 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,573 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,577 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,578 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,579 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,580 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,585 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,586 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,587 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,587 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,589 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,592 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,594 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,594 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,595 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,596 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:22,600 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:49:25,630 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='Yale policy on resident shifts during high volume ...', k=5, threshold=None
2025-04-15 09:49:25,905 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 09:49:25,952 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 09:49:25,971 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 42
2025-04-15 09:49:25,973 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 42
2025-04-15 09:49:25,985 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 42
2025-04-15 09:49:34,534 - ydrpolicy.backend.mcp.server - INFO - Received get_policy_from_ID request for policy_id: 2
2025-04-15 09:49:34,561 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: get_policy_from_ID in chat 42
2025-04-15 09:49:34,562 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 42
2025-04-15 09:49:34,574 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 42
2025-04-15 09:49:47,963 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 42.
2025-04-15 09:49:47,974 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 42
2025-04-15 09:51:05,102 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,108 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,132 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,134 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,137 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,138 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,141 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,153 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,154 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,155 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,157 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,157 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,164 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 42 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,171 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 39 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,172 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 40 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,173 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 38 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,173 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 41 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,175 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 37 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,178 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,184 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,184 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,185 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,186 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,188 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,190 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 35 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,194 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 33 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,196 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 34 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,196 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,197 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 32 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,201 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,204 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,207 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,209 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,210 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,210 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,212 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,214 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 36 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,219 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 42 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,220 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 31 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,221 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 30 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,221 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 29 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,226 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 28 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,228 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 27 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,231 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 26 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,232 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 25 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,234 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 24 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,236 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 6 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,238 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 5 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,240 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 4 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,242 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 3 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,242 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 09:51:05,243 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:21:59,253 - ydrpolicy.backend.database - INFO - Executing database command...
2025-04-15 12:21:59,253 - ydrpolicy.backend.database - WARNING - Database drop requested for URL: postgresql+asyncpg://pouria:@localhost:5432/ydrpolicy
2025-04-15 12:21:59,254 - ydrpolicy.backend.database.init_db - WARNING - Attempting to drop database 'ydrpolicy'... THIS WILL DELETE ALL DATA!
2025-04-15 12:22:00,920 - ydrpolicy.backend.database.init_db - INFO - Terminating active connections to 'ydrpolicy'...
2025-04-15 12:22:00,925 - ydrpolicy.backend.database.init_db - INFO - Connections terminated.
2025-04-15 12:22:01,428 - ydrpolicy.backend.database.init_db - INFO - Dropping database 'ydrpolicy'...
2025-04-15 12:22:01,482 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Database 'ydrpolicy' dropped successfully.
2025-04-15 12:22:01,487 - ydrpolicy.backend.database - INFO - Database command finished.
2025-04-15 12:22:08,398 - ydrpolicy.backend.database - INFO - Executing database command...
2025-04-15 12:22:08,399 - ydrpolicy.backend.database - INFO - Database initialization and population requested for URL: postgresql+asyncpg://pouria:@localhost:5432/ydrpolicy
2025-04-15 12:22:08,399 - ydrpolicy.backend.database.init_db - INFO - Starting database initialization for: postgresql+asyncpg://pouria:@localhost:5432/ydrpolicy (Populate: True)
2025-04-15 12:22:08,400 - ydrpolicy.backend.database.init_db - INFO - Checking if database 'ydrpolicy' exists...
2025-04-15 12:22:08,408 - ydrpolicy.backend.database.init_db - INFO - Creating database 'ydrpolicy'...
2025-04-15 12:22:08,479 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Database 'ydrpolicy' created.
2025-04-15 12:22:08,482 - ydrpolicy.backend.database.init_db - INFO - Ensuring extension 'vector' exists...
2025-04-15 12:22:08,501 - ydrpolicy.backend.database.init_db - INFO - Extension 'vector' checked/created.
2025-04-15 12:22:08,502 - ydrpolicy.backend.database.init_db - INFO - Creating database tables if they don't exist...
2025-04-15 12:22:08,531 - ydrpolicy.backend.database.init_db - INFO - Tables checked/created.
2025-04-15 12:22:08,532 - ydrpolicy.backend.database.init_db - INFO - Applying search vector triggers...
2025-04-15 12:22:08,546 - ydrpolicy.backend.database.init_db - INFO - Search vector triggers applied.
2025-04-15 12:22:08,546 - ydrpolicy.backend.database.init_db - INFO - Seeding users and potentially populating policies...
2025-04-15 12:22:08,547 - ydrpolicy.backend.database.init_db - INFO - Attempting to seed users from: /Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/auth/users.json
2025-04-15 12:22:08,759 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: admin@example.com (Admin: True)
2025-04-15 12:22:08,938 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: testuser1@example.com (Admin: False)
2025-04-15 12:22:09,116 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: testuser2@example.com (Admin: False)
2025-04-15 12:22:09,294 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: testuser3@example.com (Admin: False)
2025-04-15 12:22:09,294 - ydrpolicy.backend.database.init_db - INFO - User seeding complete. Prepared: 4, Skipped: 0
2025-04-15 12:22:09,294 - ydrpolicy.backend.database.init_db - INFO - Starting policy data population from scraped_policies directory...
2025-04-15 12:22:09,294 - ydrpolicy.backend.database.init_db - INFO - Scanning scraped policies directory: /Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/tests/data_collection/test_data/processed/scraped_policies
2025-04-15 12:22:09,299 - ydrpolicy.backend.database.init_db - INFO - Reading policy descriptions from CSV: /Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/tests/data_collection/test_data/processed/processed_policies_log.csv
2025-04-15 12:22:09,300 - ydrpolicy.backend.database.init_db - INFO - Loaded 17 timestamp mappings and 17 URL mappings.
2025-04-15 12:22:09,301 - ydrpolicy.backend.database.init_db - INFO - Fetching existing policy information from database...
2025-04-15 12:22:09,303 - ydrpolicy.backend.database.init_db - INFO - Found 0 existing policies in database.
2025-04-15 12:22:09,303 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Yale_University_Policy_on_Conflict_of_Interest' from folder: Yale_University_Policy_on_Conflict_of_Interest_20250409192912567168
2025-04-15 12:22:09,316 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 1
2025-04-15 12:22:09,317 - ydrpolicy.backend.database.init_db - INFO -   Split text into 9 chunks.
2025-04-15 12:22:09,330 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 9 texts
2025-04-15 12:22:10,311 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 9 embeddings
2025-04-15 12:22:10,314 - ydrpolicy.backend.database.init_db - INFO -   Generated 9 embeddings.
2025-04-15 12:22:10,335 - ydrpolicy.backend.database.init_db - INFO -   Added 9 PolicyChunk records.
2025-04-15 12:22:10,336 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Residents_Wellbeing_Policy' from folder: Residents_Wellbeing_Policy_20250409193300717366
2025-04-15 12:22:10,342 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 2
2025-04-15 12:22:10,343 - ydrpolicy.backend.database.init_db - INFO -   Split text into 9 chunks.
2025-04-15 12:22:10,344 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 9 texts
2025-04-15 12:22:10,881 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 9 embeddings
2025-04-15 12:22:10,882 - ydrpolicy.backend.database.init_db - INFO -   Generated 9 embeddings.
2025-04-15 12:22:10,901 - ydrpolicy.backend.database.init_db - INFO -   Added 9 PolicyChunk records.
2025-04-15 12:22:10,902 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'School_of_Medicine_Sabbatical_and_Triennial_Leave_Policy' from folder: School_of_Medicine_Sabbatical_and_Triennial_Leave_Policy_20250409193128387433
2025-04-15 12:22:10,909 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 3
2025-04-15 12:22:10,910 - ydrpolicy.backend.database.init_db - INFO -   Split text into 5 chunks.
2025-04-15 12:22:10,910 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 5 texts
2025-04-15 12:22:11,475 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 5 embeddings
2025-04-15 12:22:11,477 - ydrpolicy.backend.database.init_db - INFO -   Generated 5 embeddings.
2025-04-15 12:22:11,489 - ydrpolicy.backend.database.init_db - INFO -   Added 5 PolicyChunk records.
2025-04-15 12:22:11,491 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Controller_s_Office_Factsheet' from folder: Controller_s_Office_Factsheet_20250409194424987413
2025-04-15 12:22:11,498 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 4
2025-04-15 12:22:11,500 - ydrpolicy.backend.database.init_db - INFO -   Split text into 21 chunks.
2025-04-15 12:22:11,500 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 21 texts
2025-04-15 12:22:12,279 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 21 embeddings
2025-04-15 12:22:12,280 - ydrpolicy.backend.database.init_db - INFO -   Generated 21 embeddings.
2025-04-15 12:22:12,304 - ydrpolicy.backend.database.init_db - INFO -   Added 21 PolicyChunk records.
2025-04-15 12:22:12,305 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Voluntary_Faculty_Appointment_Application_Requirements_Process' from folder: Voluntary_Faculty_Appointment_Application_Requirements_Process_20250409193339788344
2025-04-15 12:22:12,309 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 5
2025-04-15 12:22:12,310 - ydrpolicy.backend.database.init_db - INFO -   Split text into 3 chunks.
2025-04-15 12:22:12,310 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 3 texts
2025-04-15 12:22:13,130 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 3 embeddings
2025-04-15 12:22:13,132 - ydrpolicy.backend.database.init_db - INFO -   Generated 3 embeddings.
2025-04-15 12:22:13,143 - ydrpolicy.backend.database.init_db - INFO -   Added 3 PolicyChunk records.
2025-04-15 12:22:13,146 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Workday_Finance_User-Based_Security_Groups_Request_Process' from folder: Workday_Finance_User-Based_Security_Groups_Request_Process_20250409194153006635
2025-04-15 12:22:13,152 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 6
2025-04-15 12:22:13,153 - ydrpolicy.backend.database.init_db - INFO -   Split text into 3 chunks.
2025-04-15 12:22:13,154 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 3 texts
2025-04-15 12:22:13,847 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 3 embeddings
2025-04-15 12:22:13,848 - ydrpolicy.backend.database.init_db - INFO -   Generated 3 embeddings.
2025-04-15 12:22:13,858 - ydrpolicy.backend.database.init_db - INFO -   Added 3 PolicyChunk records.
2025-04-15 12:22:13,860 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Staff_Workplace_Policies' from folder: Staff_Workplace_Policies_20250409204542316052
2025-04-15 12:22:13,905 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 7
2025-04-15 12:22:13,916 - ydrpolicy.backend.database.init_db - INFO -   Split text into 333 chunks.
2025-04-15 12:22:13,917 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 333 texts
2025-04-15 12:22:16,248 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 333 embeddings
2025-04-15 12:22:16,252 - ydrpolicy.backend.database.init_db - INFO -   Generated 333 embeddings.
2025-04-15 12:22:16,525 - ydrpolicy.backend.database.init_db - INFO -   Added 333 PolicyChunk records.
2025-04-15 12:22:16,529 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Grand_Rounds_Allowable_Expenses' from folder: Grand_Rounds_Allowable_Expenses_20250409192920823251
2025-04-15 12:22:16,532 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 8
2025-04-15 12:22:16,532 - ydrpolicy.backend.database.init_db - INFO -   Split text into 5 chunks.
2025-04-15 12:22:16,533 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 5 texts
2025-04-15 12:22:16,921 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 5 embeddings
2025-04-15 12:22:16,922 - ydrpolicy.backend.database.init_db - INFO -   Generated 5 embeddings.
2025-04-15 12:22:16,935 - ydrpolicy.backend.database.init_db - INFO -   Added 5 PolicyChunk records.
2025-04-15 12:22:16,936 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Voluntary_Faculty_Guidelines_Clarification' from folder: Voluntary_Faculty_Guidelines_Clarification_20250409193316792165
2025-04-15 12:22:16,943 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 9
2025-04-15 12:22:16,944 - ydrpolicy.backend.database.init_db - INFO -   Split text into 9 chunks.
2025-04-15 12:22:16,945 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 9 texts
2025-04-15 12:22:17,293 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 9 embeddings
2025-04-15 12:22:17,294 - ydrpolicy.backend.database.init_db - INFO -   Generated 9 embeddings.
2025-04-15 12:22:17,316 - ydrpolicy.backend.database.init_db - INFO -   Added 9 PolicyChunk records.
2025-04-15 12:22:17,318 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Guidelines_for_Appointment' from folder: Guidelines_for_Appointment_20250409193232742762
2025-04-15 12:22:17,325 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 10
2025-04-15 12:22:17,326 - ydrpolicy.backend.database.init_db - INFO -   Split text into 6 chunks.
2025-04-15 12:22:17,327 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 6 texts
2025-04-15 12:22:17,945 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 6 embeddings
2025-04-15 12:22:17,946 - ydrpolicy.backend.database.init_db - INFO -   Generated 6 embeddings.
2025-04-15 12:22:17,961 - ydrpolicy.backend.database.init_db - INFO -   Added 6 PolicyChunk records.
2025-04-15 12:22:17,963 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Critical_Out-Patient_Imaging_Findings_-_Immediate_Medical_Care_SOP' from folder: Critical_Out-Patient_Imaging_Findings_-_Immediate_Medical_Care_SOP_20250409193528279122
2025-04-15 12:22:17,967 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 11
2025-04-15 12:22:17,969 - ydrpolicy.backend.database.init_db - INFO -   Split text into 5 chunks.
2025-04-15 12:22:17,969 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 5 texts
2025-04-15 12:22:18,560 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 5 embeddings
2025-04-15 12:22:18,561 - ydrpolicy.backend.database.init_db - INFO -   Generated 5 embeddings.
2025-04-15 12:22:18,575 - ydrpolicy.backend.database.init_db - INFO -   Added 5 PolicyChunk records.
2025-04-15 12:22:18,577 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'YDR_Conflict_of_Interest_Policy' from folder: YDR_Conflict_of_Interest_Policy_20250409192856529523
2025-04-15 12:22:18,582 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 12
2025-04-15 12:22:18,583 - ydrpolicy.backend.database.init_db - INFO -   Split text into 7 chunks.
2025-04-15 12:22:18,583 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 7 texts
2025-04-15 12:22:19,072 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 7 embeddings
2025-04-15 12:22:19,073 - ydrpolicy.backend.database.init_db - INFO -   Generated 7 embeddings.
2025-04-15 12:22:19,089 - ydrpolicy.backend.database.init_db - INFO -   Added 7 PolicyChunk records.
2025-04-15 12:22:19,091 - ydrpolicy.backend.database.init_db - INFO - Policy population finished. Processed/Updated: 12, Deleted old: 0, Skipped: 0
2025-04-15 12:22:19,093 - ydrpolicy.backend.database.init_db - INFO - User seeding and policy population committed.
2025-04-15 12:22:19,094 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Database initialization completed successfully.
2025-04-15 12:22:19,116 - ydrpolicy.backend.database.init_db - INFO - Database engine disposed.
2025-04-15 12:22:19,118 - ydrpolicy.backend.database - INFO - Database command finished.
2025-04-15 12:22:35,111 - ydrpolicy.backend.mcp.server - INFO - MCP server process finished.
2025-04-15 12:22:35,111 - ydrpolicy.backend.mcp - INFO - MCP server process finished.
2025-04-15 12:22:38,420 - ydrpolicy.backend.mcp - INFO - Attempting to start MCP server on 0.0.0.0:8001 via http transport...
2025-04-15 12:22:38,421 - ydrpolicy.backend.mcp.server - INFO - Attempting to start MCP server using http transport...
2025-04-15 12:22:38,421 - ydrpolicy.backend.mcp.server - INFO - Running MCP server with http/sse transport via uvicorn on 0.0.0.0:8001.
2025-04-15 12:22:40,707 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 12:22:40,709 - ydrpolicy.backend.api_main - INFO - FastAPI Application Shutdown Initiated...
2025-04-15 12:22:40,710 - ydrpolicy.backend.agent.mcp_connection - INFO - Closing MCP server connection...
2025-04-15 12:22:40,710 - ydrpolicy.backend.agent.mcp_connection - INFO - MCP server connection closed.
2025-04-15 12:22:40,711 - ydrpolicy.backend.database.engine - INFO - Closing database connection pool
2025-04-15 12:22:40,713 - ydrpolicy.backend.database.engine - INFO - Database connection pool closed
2025-04-15 12:22:40,714 - ydrpolicy.backend.api_main - INFO - FastAPI Application Shutdown Complete.
2025-04-15 12:22:40,714 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 12:22:44,502 - ydrpolicy.backend.agent - INFO - Executing agent command...
2025-04-15 12:22:44,502 - ydrpolicy.backend.agent - INFO - Agent requested mode: API
2025-04-15 12:22:44,502 - ydrpolicy.backend.agent - INFO - MCP Tool Connection: Enabled
2025-04-15 12:22:44,503 - ydrpolicy.backend.agent - INFO - Starting agent via FastAPI server on 0.0.0.0:8000 (History Enabled)...
2025-04-15 12:22:44,740 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 12:22:44,741 - ydrpolicy.backend.api_main - INFO - FastAPI Application Startup Initiated...
2025-04-15 12:22:44,741 - ydrpolicy.backend.api_main - INFO - Mode: Production
2025-04-15 12:22:44,741 - ydrpolicy.backend.api_main - INFO - CORS Origins Allowed: ['http://localhost:3000']
2025-04-15 12:22:44,742 - ydrpolicy.backend.api_main - INFO - Verified required directories exist.
2025-04-15 12:22:44,742 - ydrpolicy.backend.api_main - INFO - FastAPI Application Startup Complete.
2025-04-15 12:22:44,742 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 12:27:09,553 - ydrpolicy.backend.database.engine - INFO - Creating new database engine
2025-04-15 12:27:09,574 - ydrpolicy.backend.database.engine - INFO - Database engine created successfully
2025-04-15 12:27:09,574 - ydrpolicy.backend.routers.auth - INFO - Attempting login for user: testuser1@example.com
2025-04-15 12:27:09,798 - ydrpolicy.backend.routers.auth - INFO - Login successful, token created for user: testuser1@example.com
2025-04-15 12:28:05,173 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 12:28:05,177 - ydrpolicy.backend.routers.chat - WARNING - User ID mismatch: Token user ID 2 != Request body user ID 1
2025-04-15 12:28:30,402 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 12:28:30,407 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 0: Hi, this is Pouria!...
2025-04-15 12:28:30,409 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 0, message: 'Hi, this is Pouria!...'
2025-04-15 12:28:30,410 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 12:28:30,410 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 12:28:30,411 - ydrpolicy.backend.agent.mcp_connection - WARNING - MCP Host 0.0.0.0 detected, using 'localhost' for client connection.
2025-04-15 12:28:30,412 - ydrpolicy.backend.agent.mcp_connection - INFO - Initializing MCP Server connection to: http://localhost:8001/sse
2025-04-15 12:28:30,413 - ydrpolicy.backend.agent.mcp_connection - INFO - MCPServerSse instance created.
2025-04-15 12:28:30,413 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 12:28:30,414 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 12:28:30,414 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 12:28:30,452 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 12:28:30,452 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'Hi, this is Pouria!'.
2025-04-15 12:28:30,461 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 1 for user ID 2.
2025-04-15 12:28:30,461 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 1 for user 2.
2025-04-15 12:28:30,477 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 1
2025-04-15 12:28:34,369 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 1.
2025-04-15 12:28:34,379 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 1
2025-04-15 12:28:34,392 - ydrpolicy.backend.routers.chat - INFO - API: Finished streaming response for user 2, chat new.
2025-04-15 12:29:08,009 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 12:29:08,012 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 0: What is Yale Policies on resident shifts during high volume hours?!...
2025-04-15 12:29:08,014 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 0, message: 'What is Yale Policies on resident shifts during high volume hours?!...'
2025-04-15 12:29:08,015 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 12:29:08,016 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 12:29:08,016 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 12:29:08,017 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 12:29:08,018 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 12:29:08,052 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 12:29:08,053 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'What is Yale Policies on resident shifts during high volume hours?!'.
2025-04-15 12:29:08,056 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 2 for user ID 2.
2025-04-15 12:29:08,057 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 2 for user 2.
2025-04-15 12:29:08,070 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 2
2025-04-15 12:29:10,623 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='Yale Policies on resident shifts during high volum...', k=5, threshold=None
2025-04-15 12:29:10,993 - ydrpolicy.backend.database.engine - INFO - Creating new database engine
2025-04-15 12:29:11,017 - ydrpolicy.backend.database.engine - INFO - Database engine created successfully
2025-04-15 12:29:11,018 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 12:29:11,057 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 12:29:11,076 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 2
2025-04-15 12:29:11,077 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 2
2025-04-15 12:29:11,088 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 2
2025-04-15 12:29:16,582 - ydrpolicy.backend.mcp.server - INFO - Received get_policy_from_ID request for policy_id: 2
2025-04-15 12:29:16,625 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: get_policy_from_ID in chat 2
2025-04-15 12:29:16,626 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 2
2025-04-15 12:29:16,636 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 2
2025-04-15 12:29:25,867 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 2.
2025-04-15 12:29:25,875 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 2
2025-04-15 12:29:25,888 - ydrpolicy.backend.routers.chat - INFO - API: Finished streaming response for user 2, chat new.
2025-04-15 12:30:01,868 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:30:19,821 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 2 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:30:40,739 - ydrpolicy.backend.routers.chat - INFO - API: User 2 attempting to rename chat 1 to 'Greeting'.
2025-04-15 12:30:40,742 - ydrpolicy.backend.database.repository.chats - INFO - Attempting to update title for chat ID 1 (user ID 2) to 'Greeting'.
2025-04-15 12:30:40,746 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully updated title for chat ID 1.
2025-04-15 12:30:55,126 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:30:59,001 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:31:34,645 - ydrpolicy.backend.routers.auth - INFO - Attempting login for user: testuser1@example.com
2025-04-15 12:31:34,851 - ydrpolicy.backend.routers.auth - INFO - Login successful, token created for user: testuser1@example.com
2025-04-15 12:31:39,884 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:32:07,636 - ydrpolicy.backend.routers.chat - INFO - API: User 2 attempting to rename chat 1 to 'Greetings'.
2025-04-15 12:32:07,640 - ydrpolicy.backend.database.repository.chats - INFO - Attempting to update title for chat ID 1 (user ID 2) to 'Greetings'.
2025-04-15 12:32:07,643 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully updated title for chat ID 1.
2025-04-15 12:33:23,645 - ydrpolicy.backend.routers.chat - INFO - API: User 2 attempting to archive chat 1.
2025-04-15 12:33:23,646 - ydrpolicy.backend.database.repository.chats - INFO - Attempting to archive chat ID 1 (user ID 2).
2025-04-15 12:33:23,650 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully archived chat ID 1.
2025-04-15 12:33:34,284 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:37:42,623 - ydrpolicy.backend.database - INFO - Executing database command...
2025-04-15 12:37:42,624 - ydrpolicy.backend.database - WARNING - Database drop requested for URL: postgresql+asyncpg://pouria:@localhost:5432/ydrpolicy
2025-04-15 12:37:42,624 - ydrpolicy.backend.database.init_db - WARNING - Attempting to drop database 'ydrpolicy'... THIS WILL DELETE ALL DATA!
2025-04-15 12:37:44,368 - ydrpolicy.backend.database.init_db - INFO - Terminating active connections to 'ydrpolicy'...
2025-04-15 12:37:44,372 - ydrpolicy.backend.database.init_db - INFO - Connections terminated.
2025-04-15 12:37:44,874 - ydrpolicy.backend.database.init_db - INFO - Dropping database 'ydrpolicy'...
2025-04-15 12:37:44,911 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Database 'ydrpolicy' dropped successfully.
2025-04-15 12:37:44,916 - ydrpolicy.backend.database - INFO - Database command finished.
2025-04-15 12:37:47,381 - ydrpolicy.backend.database - INFO - Executing database command...
2025-04-15 12:37:47,381 - ydrpolicy.backend.database - INFO - Database initialization and population requested for URL: postgresql+asyncpg://pouria:@localhost:5432/ydrpolicy
2025-04-15 12:37:47,382 - ydrpolicy.backend.database.init_db - INFO - Starting database initialization for: postgresql+asyncpg://pouria:@localhost:5432/ydrpolicy (Populate: True)
2025-04-15 12:37:47,382 - ydrpolicy.backend.database.init_db - INFO - Checking if database 'ydrpolicy' exists...
2025-04-15 12:37:47,390 - ydrpolicy.backend.database.init_db - INFO - Creating database 'ydrpolicy'...
2025-04-15 12:37:47,455 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Database 'ydrpolicy' created.
2025-04-15 12:37:47,457 - ydrpolicy.backend.database.init_db - INFO - Ensuring extension 'vector' exists...
2025-04-15 12:37:47,476 - ydrpolicy.backend.database.init_db - INFO - Extension 'vector' checked/created.
2025-04-15 12:37:47,477 - ydrpolicy.backend.database.init_db - INFO - Creating database tables if they don't exist...
2025-04-15 12:37:47,507 - ydrpolicy.backend.database.init_db - INFO - Tables checked/created.
2025-04-15 12:37:47,508 - ydrpolicy.backend.database.init_db - INFO - Applying search vector triggers...
2025-04-15 12:37:47,513 - ydrpolicy.backend.database.init_db - INFO - Search vector triggers applied.
2025-04-15 12:37:47,514 - ydrpolicy.backend.database.init_db - INFO - Seeding users and potentially populating policies...
2025-04-15 12:37:47,514 - ydrpolicy.backend.database.init_db - INFO - Attempting to seed users from: /Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/auth/users.json
2025-04-15 12:37:47,725 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: admin@example.com (Admin: True)
2025-04-15 12:37:47,904 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: testuser1@example.com (Admin: False)
2025-04-15 12:37:48,082 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: testuser2@example.com (Admin: False)
2025-04-15 12:37:48,259 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: testuser3@example.com (Admin: False)
2025-04-15 12:37:48,260 - ydrpolicy.backend.database.init_db - INFO - User seeding complete. Prepared: 4, Skipped: 0
2025-04-15 12:37:48,260 - ydrpolicy.backend.database.init_db - INFO - Starting policy data population from scraped_policies directory...
2025-04-15 12:37:48,260 - ydrpolicy.backend.database.init_db - INFO - Scanning scraped policies directory: /Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/tests/data_collection/test_data/processed/scraped_policies
2025-04-15 12:37:48,265 - ydrpolicy.backend.database.init_db - INFO - Reading policy descriptions from CSV: /Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/tests/data_collection/test_data/processed/processed_policies_log.csv
2025-04-15 12:37:48,266 - ydrpolicy.backend.database.init_db - INFO - Loaded 17 timestamp mappings and 17 URL mappings.
2025-04-15 12:37:48,266 - ydrpolicy.backend.database.init_db - INFO - Fetching existing policy information from database...
2025-04-15 12:37:48,268 - ydrpolicy.backend.database.init_db - INFO - Found 0 existing policies in database.
2025-04-15 12:37:48,269 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Yale_University_Policy_on_Conflict_of_Interest' from folder: Yale_University_Policy_on_Conflict_of_Interest_20250409192912567168
2025-04-15 12:37:48,281 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 1
2025-04-15 12:37:48,282 - ydrpolicy.backend.database.init_db - INFO -   Split text into 9 chunks.
2025-04-15 12:37:48,293 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 9 texts
2025-04-15 12:37:49,258 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 9 embeddings
2025-04-15 12:37:49,261 - ydrpolicy.backend.database.init_db - INFO -   Generated 9 embeddings.
2025-04-15 12:37:49,283 - ydrpolicy.backend.database.init_db - INFO -   Added 9 PolicyChunk records.
2025-04-15 12:37:49,284 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Residents_Wellbeing_Policy' from folder: Residents_Wellbeing_Policy_20250409193300717366
2025-04-15 12:37:49,290 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 2
2025-04-15 12:37:49,291 - ydrpolicy.backend.database.init_db - INFO -   Split text into 9 chunks.
2025-04-15 12:37:49,291 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 9 texts
2025-04-15 12:37:49,925 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 9 embeddings
2025-04-15 12:37:49,926 - ydrpolicy.backend.database.init_db - INFO -   Generated 9 embeddings.
2025-04-15 12:37:49,948 - ydrpolicy.backend.database.init_db - INFO -   Added 9 PolicyChunk records.
2025-04-15 12:37:49,949 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'School_of_Medicine_Sabbatical_and_Triennial_Leave_Policy' from folder: School_of_Medicine_Sabbatical_and_Triennial_Leave_Policy_20250409193128387433
2025-04-15 12:37:49,954 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 3
2025-04-15 12:37:49,955 - ydrpolicy.backend.database.init_db - INFO -   Split text into 5 chunks.
2025-04-15 12:37:49,956 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 5 texts
2025-04-15 12:37:50,822 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 5 embeddings
2025-04-15 12:37:50,822 - ydrpolicy.backend.database.init_db - INFO -   Generated 5 embeddings.
2025-04-15 12:37:50,829 - ydrpolicy.backend.database.init_db - INFO -   Added 5 PolicyChunk records.
2025-04-15 12:37:50,831 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Controller_s_Office_Factsheet' from folder: Controller_s_Office_Factsheet_20250409194424987413
2025-04-15 12:37:50,838 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 4
2025-04-15 12:37:50,839 - ydrpolicy.backend.database.init_db - INFO -   Split text into 21 chunks.
2025-04-15 12:37:50,839 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 21 texts
2025-04-15 12:37:51,917 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 21 embeddings
2025-04-15 12:37:51,918 - ydrpolicy.backend.database.init_db - INFO -   Generated 21 embeddings.
2025-04-15 12:37:51,948 - ydrpolicy.backend.database.init_db - INFO -   Added 21 PolicyChunk records.
2025-04-15 12:37:51,949 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Voluntary_Faculty_Appointment_Application_Requirements_Process' from folder: Voluntary_Faculty_Appointment_Application_Requirements_Process_20250409193339788344
2025-04-15 12:37:51,954 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 5
2025-04-15 12:37:51,955 - ydrpolicy.backend.database.init_db - INFO -   Split text into 3 chunks.
2025-04-15 12:37:51,955 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 3 texts
2025-04-15 12:37:52,733 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 3 embeddings
2025-04-15 12:37:52,734 - ydrpolicy.backend.database.init_db - INFO -   Generated 3 embeddings.
2025-04-15 12:37:52,745 - ydrpolicy.backend.database.init_db - INFO -   Added 3 PolicyChunk records.
2025-04-15 12:37:52,747 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Workday_Finance_User-Based_Security_Groups_Request_Process' from folder: Workday_Finance_User-Based_Security_Groups_Request_Process_20250409194153006635
2025-04-15 12:37:52,753 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 6
2025-04-15 12:37:52,754 - ydrpolicy.backend.database.init_db - INFO -   Split text into 3 chunks.
2025-04-15 12:37:52,754 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 3 texts
2025-04-15 12:37:53,330 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 3 embeddings
2025-04-15 12:37:53,330 - ydrpolicy.backend.database.init_db - INFO -   Generated 3 embeddings.
2025-04-15 12:37:53,336 - ydrpolicy.backend.database.init_db - INFO -   Added 3 PolicyChunk records.
2025-04-15 12:37:53,337 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Staff_Workplace_Policies' from folder: Staff_Workplace_Policies_20250409204542316052
2025-04-15 12:37:53,374 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 7
2025-04-15 12:37:53,379 - ydrpolicy.backend.database.init_db - INFO -   Split text into 333 chunks.
2025-04-15 12:37:53,379 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 333 texts
2025-04-15 12:37:55,146 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 333 embeddings
2025-04-15 12:37:55,148 - ydrpolicy.backend.database.init_db - INFO -   Generated 333 embeddings.
2025-04-15 12:37:55,421 - ydrpolicy.backend.database.init_db - INFO -   Added 333 PolicyChunk records.
2025-04-15 12:37:55,425 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Grand_Rounds_Allowable_Expenses' from folder: Grand_Rounds_Allowable_Expenses_20250409192920823251
2025-04-15 12:37:55,429 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 8
2025-04-15 12:37:55,430 - ydrpolicy.backend.database.init_db - INFO -   Split text into 5 chunks.
2025-04-15 12:37:55,430 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 5 texts
2025-04-15 12:37:55,962 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 5 embeddings
2025-04-15 12:37:55,962 - ydrpolicy.backend.database.init_db - INFO -   Generated 5 embeddings.
2025-04-15 12:37:55,973 - ydrpolicy.backend.database.init_db - INFO -   Added 5 PolicyChunk records.
2025-04-15 12:37:55,974 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Voluntary_Faculty_Guidelines_Clarification' from folder: Voluntary_Faculty_Guidelines_Clarification_20250409193316792165
2025-04-15 12:37:55,979 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 9
2025-04-15 12:37:55,980 - ydrpolicy.backend.database.init_db - INFO -   Split text into 9 chunks.
2025-04-15 12:37:55,981 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 9 texts
2025-04-15 12:37:56,659 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 9 embeddings
2025-04-15 12:37:56,660 - ydrpolicy.backend.database.init_db - INFO -   Generated 9 embeddings.
2025-04-15 12:37:56,678 - ydrpolicy.backend.database.init_db - INFO -   Added 9 PolicyChunk records.
2025-04-15 12:37:56,679 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Guidelines_for_Appointment' from folder: Guidelines_for_Appointment_20250409193232742762
2025-04-15 12:37:56,683 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 10
2025-04-15 12:37:56,684 - ydrpolicy.backend.database.init_db - INFO -   Split text into 6 chunks.
2025-04-15 12:37:56,684 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 6 texts
2025-04-15 12:37:57,341 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 6 embeddings
2025-04-15 12:37:57,342 - ydrpolicy.backend.database.init_db - INFO -   Generated 6 embeddings.
2025-04-15 12:37:57,358 - ydrpolicy.backend.database.init_db - INFO -   Added 6 PolicyChunk records.
2025-04-15 12:37:57,360 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Critical_Out-Patient_Imaging_Findings_-_Immediate_Medical_Care_SOP' from folder: Critical_Out-Patient_Imaging_Findings_-_Immediate_Medical_Care_SOP_20250409193528279122
2025-04-15 12:37:57,365 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 11
2025-04-15 12:37:57,366 - ydrpolicy.backend.database.init_db - INFO -   Split text into 5 chunks.
2025-04-15 12:37:57,367 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 5 texts
2025-04-15 12:37:57,752 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 5 embeddings
2025-04-15 12:37:57,753 - ydrpolicy.backend.database.init_db - INFO -   Generated 5 embeddings.
2025-04-15 12:37:57,766 - ydrpolicy.backend.database.init_db - INFO -   Added 5 PolicyChunk records.
2025-04-15 12:37:57,768 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'YDR_Conflict_of_Interest_Policy' from folder: YDR_Conflict_of_Interest_Policy_20250409192856529523
2025-04-15 12:37:57,774 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 12
2025-04-15 12:37:57,775 - ydrpolicy.backend.database.init_db - INFO -   Split text into 7 chunks.
2025-04-15 12:37:57,776 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 7 texts
2025-04-15 12:37:58,569 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 7 embeddings
2025-04-15 12:37:58,570 - ydrpolicy.backend.database.init_db - INFO -   Generated 7 embeddings.
2025-04-15 12:37:58,588 - ydrpolicy.backend.database.init_db - INFO -   Added 7 PolicyChunk records.
2025-04-15 12:37:58,589 - ydrpolicy.backend.database.init_db - INFO - Policy population finished. Processed/Updated: 12, Deleted old: 0, Skipped: 0
2025-04-15 12:37:58,592 - ydrpolicy.backend.database.init_db - INFO - User seeding and policy population committed.
2025-04-15 12:37:58,593 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Database initialization completed successfully.
2025-04-15 12:37:58,611 - ydrpolicy.backend.database.init_db - INFO - Database engine disposed.
2025-04-15 12:37:58,613 - ydrpolicy.backend.database - INFO - Database command finished.
2025-04-15 12:38:03,801 - ydrpolicy.backend.database - INFO - Executing database command...
2025-04-15 12:38:03,801 - ydrpolicy.backend.database - WARNING - Database drop requested for URL: postgresql+asyncpg://pouria:@localhost:5432/ydrpolicy
2025-04-15 12:38:03,801 - ydrpolicy.backend.database.init_db - WARNING - Attempting to drop database 'ydrpolicy'... THIS WILL DELETE ALL DATA!
2025-04-15 12:38:04,757 - ydrpolicy.backend.database.init_db - INFO - Terminating active connections to 'ydrpolicy'...
2025-04-15 12:38:04,762 - ydrpolicy.backend.database.init_db - INFO - Connections terminated.
2025-04-15 12:38:05,264 - ydrpolicy.backend.database.init_db - INFO - Dropping database 'ydrpolicy'...
2025-04-15 12:38:05,302 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Database 'ydrpolicy' dropped successfully.
2025-04-15 12:38:05,307 - ydrpolicy.backend.database - INFO - Database command finished.
2025-04-15 12:38:07,979 - ydrpolicy.backend.database - INFO - Executing database command...
2025-04-15 12:38:07,979 - ydrpolicy.backend.database - INFO - Database initialization and population requested for URL: postgresql+asyncpg://pouria:@localhost:5432/ydrpolicy
2025-04-15 12:38:07,980 - ydrpolicy.backend.database.init_db - INFO - Starting database initialization for: postgresql+asyncpg://pouria:@localhost:5432/ydrpolicy (Populate: True)
2025-04-15 12:38:07,980 - ydrpolicy.backend.database.init_db - INFO - Checking if database 'ydrpolicy' exists...
2025-04-15 12:38:07,986 - ydrpolicy.backend.database.init_db - INFO - Creating database 'ydrpolicy'...
2025-04-15 12:38:08,040 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Database 'ydrpolicy' created.
2025-04-15 12:38:08,042 - ydrpolicy.backend.database.init_db - INFO - Ensuring extension 'vector' exists...
2025-04-15 12:38:08,056 - ydrpolicy.backend.database.init_db - INFO - Extension 'vector' checked/created.
2025-04-15 12:38:08,057 - ydrpolicy.backend.database.init_db - INFO - Creating database tables if they don't exist...
2025-04-15 12:38:08,083 - ydrpolicy.backend.database.init_db - INFO - Tables checked/created.
2025-04-15 12:38:08,083 - ydrpolicy.backend.database.init_db - INFO - Applying search vector triggers...
2025-04-15 12:38:08,087 - ydrpolicy.backend.database.init_db - INFO - Search vector triggers applied.
2025-04-15 12:38:08,087 - ydrpolicy.backend.database.init_db - INFO - Seeding users and potentially populating policies...
2025-04-15 12:38:08,087 - ydrpolicy.backend.database.init_db - INFO - Attempting to seed users from: /Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/auth/users.json
2025-04-15 12:38:08,290 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: admin@example.com (Admin: True)
2025-04-15 12:38:08,473 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: testuser1@example.com (Admin: False)
2025-04-15 12:38:08,652 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: testuser2@example.com (Admin: False)
2025-04-15 12:38:08,830 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: testuser3@example.com (Admin: False)
2025-04-15 12:38:08,831 - ydrpolicy.backend.database.init_db - INFO - User seeding complete. Prepared: 4, Skipped: 0
2025-04-15 12:38:08,831 - ydrpolicy.backend.database.init_db - INFO - Starting policy data population from scraped_policies directory...
2025-04-15 12:38:08,831 - ydrpolicy.backend.database.init_db - INFO - Scanning scraped policies directory: /Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/tests/data_collection/test_data/processed/scraped_policies
2025-04-15 12:38:08,833 - ydrpolicy.backend.database.init_db - INFO - Reading policy descriptions from CSV: /Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/tests/data_collection/test_data/processed/processed_policies_log.csv
2025-04-15 12:38:08,834 - ydrpolicy.backend.database.init_db - INFO - Loaded 17 timestamp mappings and 17 URL mappings.
2025-04-15 12:38:08,834 - ydrpolicy.backend.database.init_db - INFO - Fetching existing policy information from database...
2025-04-15 12:38:08,836 - ydrpolicy.backend.database.init_db - INFO - Found 0 existing policies in database.
2025-04-15 12:38:08,836 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Yale_University_Policy_on_Conflict_of_Interest' from folder: Yale_University_Policy_on_Conflict_of_Interest_20250409192912567168
2025-04-15 12:38:08,845 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 1
2025-04-15 12:38:08,845 - ydrpolicy.backend.database.init_db - INFO -   Split text into 9 chunks.
2025-04-15 12:38:08,857 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 9 texts
2025-04-15 12:38:09,535 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 9 embeddings
2025-04-15 12:38:09,539 - ydrpolicy.backend.database.init_db - INFO -   Generated 9 embeddings.
2025-04-15 12:38:09,565 - ydrpolicy.backend.database.init_db - INFO -   Added 9 PolicyChunk records.
2025-04-15 12:38:09,566 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Residents_Wellbeing_Policy' from folder: Residents_Wellbeing_Policy_20250409193300717366
2025-04-15 12:38:09,571 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 2
2025-04-15 12:38:09,572 - ydrpolicy.backend.database.init_db - INFO -   Split text into 9 chunks.
2025-04-15 12:38:09,572 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 9 texts
2025-04-15 12:38:10,544 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 9 embeddings
2025-04-15 12:38:10,544 - ydrpolicy.backend.database.init_db - INFO -   Generated 9 embeddings.
2025-04-15 12:38:10,565 - ydrpolicy.backend.database.init_db - INFO -   Added 9 PolicyChunk records.
2025-04-15 12:38:10,567 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'School_of_Medicine_Sabbatical_and_Triennial_Leave_Policy' from folder: School_of_Medicine_Sabbatical_and_Triennial_Leave_Policy_20250409193128387433
2025-04-15 12:38:10,571 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 3
2025-04-15 12:38:10,572 - ydrpolicy.backend.database.init_db - INFO -   Split text into 5 chunks.
2025-04-15 12:38:10,572 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 5 texts
2025-04-15 12:38:11,573 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 5 embeddings
2025-04-15 12:38:11,574 - ydrpolicy.backend.database.init_db - INFO -   Generated 5 embeddings.
2025-04-15 12:38:11,586 - ydrpolicy.backend.database.init_db - INFO -   Added 5 PolicyChunk records.
2025-04-15 12:38:11,587 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Controller_s_Office_Factsheet' from folder: Controller_s_Office_Factsheet_20250409194424987413
2025-04-15 12:38:11,594 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 4
2025-04-15 12:38:11,595 - ydrpolicy.backend.database.init_db - INFO -   Split text into 21 chunks.
2025-04-15 12:38:11,596 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 21 texts
2025-04-15 12:38:12,262 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 21 embeddings
2025-04-15 12:38:12,263 - ydrpolicy.backend.database.init_db - INFO -   Generated 21 embeddings.
2025-04-15 12:38:12,297 - ydrpolicy.backend.database.init_db - INFO -   Added 21 PolicyChunk records.
2025-04-15 12:38:12,298 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Voluntary_Faculty_Appointment_Application_Requirements_Process' from folder: Voluntary_Faculty_Appointment_Application_Requirements_Process_20250409193339788344
2025-04-15 12:38:12,301 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 5
2025-04-15 12:38:12,302 - ydrpolicy.backend.database.init_db - INFO -   Split text into 3 chunks.
2025-04-15 12:38:12,302 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 3 texts
2025-04-15 12:38:13,077 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 3 embeddings
2025-04-15 12:38:13,078 - ydrpolicy.backend.database.init_db - INFO -   Generated 3 embeddings.
2025-04-15 12:38:13,087 - ydrpolicy.backend.database.init_db - INFO -   Added 3 PolicyChunk records.
2025-04-15 12:38:13,088 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Workday_Finance_User-Based_Security_Groups_Request_Process' from folder: Workday_Finance_User-Based_Security_Groups_Request_Process_20250409194153006635
2025-04-15 12:38:13,092 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 6
2025-04-15 12:38:13,093 - ydrpolicy.backend.database.init_db - INFO -   Split text into 3 chunks.
2025-04-15 12:38:13,094 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 3 texts
2025-04-15 12:38:13,489 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 3 embeddings
2025-04-15 12:38:13,491 - ydrpolicy.backend.database.init_db - INFO -   Generated 3 embeddings.
2025-04-15 12:38:13,501 - ydrpolicy.backend.database.init_db - INFO -   Added 3 PolicyChunk records.
2025-04-15 12:38:13,503 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Staff_Workplace_Policies' from folder: Staff_Workplace_Policies_20250409204542316052
2025-04-15 12:38:13,548 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 7
2025-04-15 12:38:13,559 - ydrpolicy.backend.database.init_db - INFO -   Split text into 333 chunks.
2025-04-15 12:38:13,559 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 333 texts
2025-04-15 12:38:15,161 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 333 embeddings
2025-04-15 12:38:15,165 - ydrpolicy.backend.database.init_db - INFO -   Generated 333 embeddings.
2025-04-15 12:38:15,433 - ydrpolicy.backend.database.init_db - INFO -   Added 333 PolicyChunk records.
2025-04-15 12:38:15,437 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Grand_Rounds_Allowable_Expenses' from folder: Grand_Rounds_Allowable_Expenses_20250409192920823251
2025-04-15 12:38:15,440 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 8
2025-04-15 12:38:15,440 - ydrpolicy.backend.database.init_db - INFO -   Split text into 5 chunks.
2025-04-15 12:38:15,441 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 5 texts
2025-04-15 12:38:15,714 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 5 embeddings
2025-04-15 12:38:15,715 - ydrpolicy.backend.database.init_db - INFO -   Generated 5 embeddings.
2025-04-15 12:38:15,727 - ydrpolicy.backend.database.init_db - INFO -   Added 5 PolicyChunk records.
2025-04-15 12:38:15,728 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Voluntary_Faculty_Guidelines_Clarification' from folder: Voluntary_Faculty_Guidelines_Clarification_20250409193316792165
2025-04-15 12:38:15,733 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 9
2025-04-15 12:38:15,734 - ydrpolicy.backend.database.init_db - INFO -   Split text into 9 chunks.
2025-04-15 12:38:15,735 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 9 texts
2025-04-15 12:38:20,075 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 9 embeddings
2025-04-15 12:38:20,077 - ydrpolicy.backend.database.init_db - INFO -   Generated 9 embeddings.
2025-04-15 12:38:20,099 - ydrpolicy.backend.database.init_db - INFO -   Added 9 PolicyChunk records.
2025-04-15 12:38:20,100 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Guidelines_for_Appointment' from folder: Guidelines_for_Appointment_20250409193232742762
2025-04-15 12:38:20,105 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 10
2025-04-15 12:38:20,106 - ydrpolicy.backend.database.init_db - INFO -   Split text into 6 chunks.
2025-04-15 12:38:20,107 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 6 texts
2025-04-15 12:38:21,990 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 6 embeddings
2025-04-15 12:38:21,992 - ydrpolicy.backend.database.init_db - INFO -   Generated 6 embeddings.
2025-04-15 12:38:22,008 - ydrpolicy.backend.database.init_db - INFO -   Added 6 PolicyChunk records.
2025-04-15 12:38:22,009 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Critical_Out-Patient_Imaging_Findings_-_Immediate_Medical_Care_SOP' from folder: Critical_Out-Patient_Imaging_Findings_-_Immediate_Medical_Care_SOP_20250409193528279122
2025-04-15 12:38:22,014 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 11
2025-04-15 12:38:22,014 - ydrpolicy.backend.database.init_db - INFO -   Split text into 5 chunks.
2025-04-15 12:38:22,015 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 5 texts
2025-04-15 12:38:22,711 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 5 embeddings
2025-04-15 12:38:22,712 - ydrpolicy.backend.database.init_db - INFO -   Generated 5 embeddings.
2025-04-15 12:38:22,725 - ydrpolicy.backend.database.init_db - INFO -   Added 5 PolicyChunk records.
2025-04-15 12:38:22,726 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'YDR_Conflict_of_Interest_Policy' from folder: YDR_Conflict_of_Interest_Policy_20250409192856529523
2025-04-15 12:38:22,732 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 12
2025-04-15 12:38:22,733 - ydrpolicy.backend.database.init_db - INFO -   Split text into 7 chunks.
2025-04-15 12:38:22,733 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 7 texts
2025-04-15 12:38:23,976 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 7 embeddings
2025-04-15 12:38:23,977 - ydrpolicy.backend.database.init_db - INFO -   Generated 7 embeddings.
2025-04-15 12:38:23,995 - ydrpolicy.backend.database.init_db - INFO -   Added 7 PolicyChunk records.
2025-04-15 12:38:23,996 - ydrpolicy.backend.database.init_db - INFO - Policy population finished. Processed/Updated: 12, Deleted old: 0, Skipped: 0
2025-04-15 12:38:23,998 - ydrpolicy.backend.database.init_db - INFO - User seeding and policy population committed.
2025-04-15 12:38:23,999 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Database initialization completed successfully.
2025-04-15 12:38:24,018 - ydrpolicy.backend.database.init_db - INFO - Database engine disposed.
2025-04-15 12:38:24,020 - ydrpolicy.backend.database - INFO - Database command finished.
2025-04-15 12:38:31,214 - ydrpolicy.backend.mcp.server - INFO - MCP server process finished.
2025-04-15 12:38:31,215 - ydrpolicy.backend.mcp - INFO - MCP server process finished.
2025-04-15 12:38:34,542 - ydrpolicy.backend.mcp - INFO - Attempting to start MCP server on 0.0.0.0:8001 via http transport...
2025-04-15 12:38:34,542 - ydrpolicy.backend.mcp.server - INFO - Attempting to start MCP server using http transport...
2025-04-15 12:38:34,543 - ydrpolicy.backend.mcp.server - INFO - Running MCP server with http/sse transport via uvicorn on 0.0.0.0:8001.
2025-04-15 12:38:38,482 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 12:38:38,484 - ydrpolicy.backend.api_main - INFO - FastAPI Application Shutdown Initiated...
2025-04-15 12:38:38,485 - ydrpolicy.backend.agent.mcp_connection - INFO - Closing MCP server connection...
2025-04-15 12:38:38,485 - ydrpolicy.backend.agent.mcp_connection - INFO - MCP server connection closed.
2025-04-15 12:38:38,486 - ydrpolicy.backend.database.engine - INFO - Closing database connection pool
2025-04-15 12:38:38,488 - ydrpolicy.backend.database.engine - INFO - Database connection pool closed
2025-04-15 12:38:38,488 - ydrpolicy.backend.api_main - INFO - FastAPI Application Shutdown Complete.
2025-04-15 12:38:38,489 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 12:38:40,855 - ydrpolicy.backend.agent - INFO - Executing agent command...
2025-04-15 12:38:40,855 - ydrpolicy.backend.agent - INFO - Agent requested mode: API
2025-04-15 12:38:40,855 - ydrpolicy.backend.agent - INFO - MCP Tool Connection: Enabled
2025-04-15 12:38:40,856 - ydrpolicy.backend.agent - INFO - Starting agent via FastAPI server on 0.0.0.0:8000 (History Enabled)...
2025-04-15 12:38:41,092 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 12:38:41,093 - ydrpolicy.backend.api_main - INFO - FastAPI Application Startup Initiated...
2025-04-15 12:38:41,093 - ydrpolicy.backend.api_main - INFO - Mode: Production
2025-04-15 12:38:41,093 - ydrpolicy.backend.api_main - INFO - CORS Origins Allowed: ['http://localhost:3000']
2025-04-15 12:38:41,094 - ydrpolicy.backend.api_main - INFO - Verified required directories exist.
2025-04-15 12:38:41,094 - ydrpolicy.backend.api_main - INFO - FastAPI Application Startup Complete.
2025-04-15 12:38:41,094 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 12:39:03,523 - ydrpolicy.backend.database.engine - INFO - Creating new database engine
2025-04-15 12:39:03,543 - ydrpolicy.backend.database.engine - INFO - Database engine created successfully
2025-04-15 12:39:03,544 - ydrpolicy.backend.routers.auth - INFO - Attempting login for user: testuser1@example.com
2025-04-15 12:39:03,766 - ydrpolicy.backend.routers.auth - INFO - Login successful, token created for user: testuser1@example.com
2025-04-15 12:39:20,657 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 12:39:20,661 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 0: Hi, this is Pouria!...
2025-04-15 12:39:20,664 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 0, message: 'Hi, this is Pouria!...'
2025-04-15 12:39:20,665 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 12:39:20,665 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 12:39:20,666 - ydrpolicy.backend.agent.mcp_connection - WARNING - MCP Host 0.0.0.0 detected, using 'localhost' for client connection.
2025-04-15 12:39:20,667 - ydrpolicy.backend.agent.mcp_connection - INFO - Initializing MCP Server connection to: http://localhost:8001/sse
2025-04-15 12:39:20,667 - ydrpolicy.backend.agent.mcp_connection - INFO - MCPServerSse instance created.
2025-04-15 12:39:20,668 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 12:39:20,668 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 12:39:20,669 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 12:39:20,707 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 12:39:20,708 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'Hi, this is Pouria!'.
2025-04-15 12:39:20,716 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 1 for user ID 2.
2025-04-15 12:39:20,716 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 1 for user 2.
2025-04-15 12:39:20,731 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 1
2025-04-15 12:40:15,109 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 1.
2025-04-15 12:40:15,119 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 1
2025-04-15 12:40:15,131 - ydrpolicy.backend.routers.chat - INFO - API: Finished streaming response for user 2, chat new.
2025-04-15 12:40:30,406 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 12:40:30,413 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 0: Hi, what is the policy on residents shift change during high volume hours?...
2025-04-15 12:40:30,415 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 0, message: 'Hi, what is the policy on residents shift change during high volume hours?...'
2025-04-15 12:40:30,416 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 12:40:30,417 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 12:40:30,417 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 12:40:30,418 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 12:40:30,419 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 12:40:30,454 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 12:40:30,454 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'Hi, what is the policy on residents shift change during high volume hours?'.
2025-04-15 12:40:30,458 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 2 for user ID 2.
2025-04-15 12:40:30,458 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 2 for user 2.
2025-04-15 12:40:30,471 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 2
2025-04-15 12:40:35,056 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='policy on residents shift change during high volum...', k=5, threshold=None
2025-04-15 12:40:35,322 - ydrpolicy.backend.database.engine - INFO - Creating new database engine
2025-04-15 12:40:35,343 - ydrpolicy.backend.database.engine - INFO - Database engine created successfully
2025-04-15 12:40:35,344 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 12:40:35,383 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 12:40:35,401 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 2
2025-04-15 12:40:35,401 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 2
2025-04-15 12:40:35,413 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 2
2025-04-15 12:40:44,432 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='resident shift change high volume hours diagnostic...', k=5, threshold=None
2025-04-15 12:40:44,867 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 12:40:44,879 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 12:40:44,897 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 2
2025-04-15 12:40:44,899 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 2
2025-04-15 12:40:44,911 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 2
2025-04-15 12:40:53,166 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='residents shift change high volume hours schedulin...', k=5, threshold=None
2025-04-15 12:40:53,569 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 12:40:53,580 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 12:40:53,599 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 2
2025-04-15 12:40:53,601 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 2
2025-04-15 12:40:53,612 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 2
2025-04-15 12:41:05,248 - ydrpolicy.backend.mcp.server - INFO - Received get_policy_from_ID request for policy_id: 2
2025-04-15 12:41:05,290 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: get_policy_from_ID in chat 2
2025-04-15 12:41:05,291 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 2
2025-04-15 12:41:05,302 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 2
2025-04-15 12:41:16,112 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 2.
2025-04-15 12:41:16,120 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 2
2025-04-15 12:41:16,132 - ydrpolicy.backend.routers.chat - INFO - API: Finished streaming response for user 2, chat new.
2025-04-15 12:41:24,578 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:41:34,909 - ydrpolicy.backend.routers.chat - INFO - API: Received request for messages in chat 1 for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:41:52,500 - ydrpolicy.backend.routers.chat - INFO - API: User 2 attempting to rename chat 1 to 'Greeting'.
2025-04-15 12:41:52,502 - ydrpolicy.backend.database.repository.chats - INFO - Attempting to update title for chat ID 1 (user ID 2) to 'Greeting'.
2025-04-15 12:41:52,511 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully updated title for chat ID 1.
2025-04-15 12:42:03,244 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:42:14,861 - ydrpolicy.backend.routers.chat - INFO - API: User 2 attempting to rename chat 1 to 'Greeting'.
2025-04-15 12:42:14,865 - ydrpolicy.backend.database.repository.chats - INFO - Attempting to update title for chat ID 1 (user ID 2) to 'Greeting'.
2025-04-15 12:42:14,868 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully updated title for chat ID 1.
2025-04-15 12:42:19,483 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:42:28,779 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:46:13,230 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 12:46:13,232 - ydrpolicy.backend.api_main - INFO - FastAPI Application Shutdown Initiated...
2025-04-15 12:46:13,233 - ydrpolicy.backend.agent.mcp_connection - INFO - Closing MCP server connection...
2025-04-15 12:46:13,234 - ydrpolicy.backend.agent.mcp_connection - INFO - MCP server connection closed.
2025-04-15 12:46:13,234 - ydrpolicy.backend.database.engine - INFO - Closing database connection pool
2025-04-15 12:46:13,240 - ydrpolicy.backend.database.engine - INFO - Database connection pool closed
2025-04-15 12:46:13,241 - ydrpolicy.backend.api_main - INFO - FastAPI Application Shutdown Complete.
2025-04-15 12:46:13,241 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 12:46:20,541 - ydrpolicy.backend.database - INFO - Executing database command...
2025-04-15 12:46:20,541 - ydrpolicy.backend.database - WARNING - Database drop requested for URL: postgresql+asyncpg://pouria:@localhost:5432/ydrpolicy
2025-04-15 12:46:20,542 - ydrpolicy.backend.database.init_db - WARNING - Attempting to drop database 'ydrpolicy'... THIS WILL DELETE ALL DATA!
2025-04-15 12:46:22,427 - ydrpolicy.backend.database.init_db - INFO - Terminating active connections to 'ydrpolicy'...
2025-04-15 12:46:22,433 - ydrpolicy.backend.database.init_db - INFO - Connections terminated.
2025-04-15 12:46:22,935 - ydrpolicy.backend.database.init_db - INFO - Dropping database 'ydrpolicy'...
2025-04-15 12:46:22,980 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Database 'ydrpolicy' dropped successfully.
2025-04-15 12:46:22,985 - ydrpolicy.backend.database - INFO - Database command finished.
2025-04-15 12:46:25,137 - ydrpolicy.backend.database - INFO - Executing database command...
2025-04-15 12:46:25,137 - ydrpolicy.backend.database - INFO - Database initialization and population requested for URL: postgresql+asyncpg://pouria:@localhost:5432/ydrpolicy
2025-04-15 12:46:25,138 - ydrpolicy.backend.database.init_db - INFO - Starting database initialization for: postgresql+asyncpg://pouria:@localhost:5432/ydrpolicy (Populate: True)
2025-04-15 12:46:25,138 - ydrpolicy.backend.database.init_db - INFO - Checking if database 'ydrpolicy' exists...
2025-04-15 12:46:25,146 - ydrpolicy.backend.database.init_db - INFO - Creating database 'ydrpolicy'...
2025-04-15 12:46:25,202 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Database 'ydrpolicy' created.
2025-04-15 12:46:25,204 - ydrpolicy.backend.database.init_db - INFO - Ensuring extension 'vector' exists...
2025-04-15 12:46:25,221 - ydrpolicy.backend.database.init_db - INFO - Extension 'vector' checked/created.
2025-04-15 12:46:25,221 - ydrpolicy.backend.database.init_db - INFO - Creating database tables if they don't exist...
2025-04-15 12:46:25,250 - ydrpolicy.backend.database.init_db - INFO - Tables checked/created.
2025-04-15 12:46:25,250 - ydrpolicy.backend.database.init_db - INFO - Applying search vector triggers...
2025-04-15 12:46:25,253 - ydrpolicy.backend.database.init_db - INFO - Search vector triggers applied.
2025-04-15 12:46:25,254 - ydrpolicy.backend.database.init_db - INFO - Seeding users and potentially populating policies...
2025-04-15 12:46:25,254 - ydrpolicy.backend.database.init_db - INFO - Attempting to seed users from: /Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/auth/users.json
2025-04-15 12:46:25,462 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: admin@example.com (Admin: True)
2025-04-15 12:46:25,642 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: testuser1@example.com (Admin: False)
2025-04-15 12:46:25,819 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: testuser2@example.com (Admin: False)
2025-04-15 12:46:25,996 - ydrpolicy.backend.database.init_db - INFO - Prepared new user for creation: testuser3@example.com (Admin: False)
2025-04-15 12:46:25,997 - ydrpolicy.backend.database.init_db - INFO - User seeding complete. Prepared: 4, Skipped: 0
2025-04-15 12:46:25,997 - ydrpolicy.backend.database.init_db - INFO - Starting policy data population from scraped_policies directory...
2025-04-15 12:46:25,997 - ydrpolicy.backend.database.init_db - INFO - Scanning scraped policies directory: /Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/tests/data_collection/test_data/processed/scraped_policies
2025-04-15 12:46:25,999 - ydrpolicy.backend.database.init_db - INFO - Reading policy descriptions from CSV: /Users/pouria/Documents/Coding/YDRP-RAG/ydrp_engine/tests/data_collection/test_data/processed/processed_policies_log.csv
2025-04-15 12:46:25,999 - ydrpolicy.backend.database.init_db - INFO - Loaded 17 timestamp mappings and 17 URL mappings.
2025-04-15 12:46:25,999 - ydrpolicy.backend.database.init_db - INFO - Fetching existing policy information from database...
2025-04-15 12:46:26,002 - ydrpolicy.backend.database.init_db - INFO - Found 0 existing policies in database.
2025-04-15 12:46:26,002 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Yale_University_Policy_on_Conflict_of_Interest' from folder: Yale_University_Policy_on_Conflict_of_Interest_20250409192912567168
2025-04-15 12:46:26,010 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 1
2025-04-15 12:46:26,011 - ydrpolicy.backend.database.init_db - INFO -   Split text into 9 chunks.
2025-04-15 12:46:26,022 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 9 texts
2025-04-15 12:46:26,584 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 9 embeddings
2025-04-15 12:46:26,588 - ydrpolicy.backend.database.init_db - INFO -   Generated 9 embeddings.
2025-04-15 12:46:26,613 - ydrpolicy.backend.database.init_db - INFO -   Added 9 PolicyChunk records.
2025-04-15 12:46:26,614 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Residents_Wellbeing_Policy' from folder: Residents_Wellbeing_Policy_20250409193300717366
2025-04-15 12:46:26,621 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 2
2025-04-15 12:46:26,622 - ydrpolicy.backend.database.init_db - INFO -   Split text into 9 chunks.
2025-04-15 12:46:26,623 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 9 texts
2025-04-15 12:46:27,291 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 9 embeddings
2025-04-15 12:46:27,292 - ydrpolicy.backend.database.init_db - INFO -   Generated 9 embeddings.
2025-04-15 12:46:27,312 - ydrpolicy.backend.database.init_db - INFO -   Added 9 PolicyChunk records.
2025-04-15 12:46:27,313 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'School_of_Medicine_Sabbatical_and_Triennial_Leave_Policy' from folder: School_of_Medicine_Sabbatical_and_Triennial_Leave_Policy_20250409193128387433
2025-04-15 12:46:27,317 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 3
2025-04-15 12:46:27,318 - ydrpolicy.backend.database.init_db - INFO -   Split text into 5 chunks.
2025-04-15 12:46:27,319 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 5 texts
2025-04-15 12:46:28,008 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 5 embeddings
2025-04-15 12:46:28,009 - ydrpolicy.backend.database.init_db - INFO -   Generated 5 embeddings.
2025-04-15 12:46:28,023 - ydrpolicy.backend.database.init_db - INFO -   Added 5 PolicyChunk records.
2025-04-15 12:46:28,026 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Controller_s_Office_Factsheet' from folder: Controller_s_Office_Factsheet_20250409194424987413
2025-04-15 12:46:28,033 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 4
2025-04-15 12:46:28,034 - ydrpolicy.backend.database.init_db - INFO -   Split text into 21 chunks.
2025-04-15 12:46:28,035 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 21 texts
2025-04-15 12:46:28,727 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 21 embeddings
2025-04-15 12:46:28,728 - ydrpolicy.backend.database.init_db - INFO -   Generated 21 embeddings.
2025-04-15 12:46:28,755 - ydrpolicy.backend.database.init_db - INFO -   Added 21 PolicyChunk records.
2025-04-15 12:46:28,755 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Voluntary_Faculty_Appointment_Application_Requirements_Process' from folder: Voluntary_Faculty_Appointment_Application_Requirements_Process_20250409193339788344
2025-04-15 12:46:28,758 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 5
2025-04-15 12:46:28,759 - ydrpolicy.backend.database.init_db - INFO -   Split text into 3 chunks.
2025-04-15 12:46:28,759 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 3 texts
2025-04-15 12:46:29,233 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 3 embeddings
2025-04-15 12:46:29,234 - ydrpolicy.backend.database.init_db - INFO -   Generated 3 embeddings.
2025-04-15 12:46:29,240 - ydrpolicy.backend.database.init_db - INFO -   Added 3 PolicyChunk records.
2025-04-15 12:46:29,241 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Workday_Finance_User-Based_Security_Groups_Request_Process' from folder: Workday_Finance_User-Based_Security_Groups_Request_Process_20250409194153006635
2025-04-15 12:46:29,244 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 6
2025-04-15 12:46:29,244 - ydrpolicy.backend.database.init_db - INFO -   Split text into 3 chunks.
2025-04-15 12:46:29,245 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 3 texts
2025-04-15 12:46:29,647 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 3 embeddings
2025-04-15 12:46:29,648 - ydrpolicy.backend.database.init_db - INFO -   Generated 3 embeddings.
2025-04-15 12:46:29,657 - ydrpolicy.backend.database.init_db - INFO -   Added 3 PolicyChunk records.
2025-04-15 12:46:29,660 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Staff_Workplace_Policies' from folder: Staff_Workplace_Policies_20250409204542316052
2025-04-15 12:46:29,704 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 7
2025-04-15 12:46:29,714 - ydrpolicy.backend.database.init_db - INFO -   Split text into 333 chunks.
2025-04-15 12:46:29,714 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 333 texts
2025-04-15 12:46:31,029 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 333 embeddings
2025-04-15 12:46:31,033 - ydrpolicy.backend.database.init_db - INFO -   Generated 333 embeddings.
2025-04-15 12:46:31,305 - ydrpolicy.backend.database.init_db - INFO -   Added 333 PolicyChunk records.
2025-04-15 12:46:31,309 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Grand_Rounds_Allowable_Expenses' from folder: Grand_Rounds_Allowable_Expenses_20250409192920823251
2025-04-15 12:46:31,312 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 8
2025-04-15 12:46:31,313 - ydrpolicy.backend.database.init_db - INFO -   Split text into 5 chunks.
2025-04-15 12:46:31,313 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 5 texts
2025-04-15 12:46:32,104 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 5 embeddings
2025-04-15 12:46:32,105 - ydrpolicy.backend.database.init_db - INFO -   Generated 5 embeddings.
2025-04-15 12:46:32,119 - ydrpolicy.backend.database.init_db - INFO -   Added 5 PolicyChunk records.
2025-04-15 12:46:32,121 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Voluntary_Faculty_Guidelines_Clarification' from folder: Voluntary_Faculty_Guidelines_Clarification_20250409193316792165
2025-04-15 12:46:32,126 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 9
2025-04-15 12:46:32,127 - ydrpolicy.backend.database.init_db - INFO -   Split text into 9 chunks.
2025-04-15 12:46:32,128 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 9 texts
2025-04-15 12:46:33,227 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 9 embeddings
2025-04-15 12:46:33,228 - ydrpolicy.backend.database.init_db - INFO -   Generated 9 embeddings.
2025-04-15 12:46:33,245 - ydrpolicy.backend.database.init_db - INFO -   Added 9 PolicyChunk records.
2025-04-15 12:46:33,246 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Guidelines_for_Appointment' from folder: Guidelines_for_Appointment_20250409193232742762
2025-04-15 12:46:33,249 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 10
2025-04-15 12:46:33,250 - ydrpolicy.backend.database.init_db - INFO -   Split text into 6 chunks.
2025-04-15 12:46:33,250 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 6 texts
2025-04-15 12:46:33,638 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 6 embeddings
2025-04-15 12:46:33,639 - ydrpolicy.backend.database.init_db - INFO -   Generated 6 embeddings.
2025-04-15 12:46:33,654 - ydrpolicy.backend.database.init_db - INFO -   Added 6 PolicyChunk records.
2025-04-15 12:46:33,655 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'Critical_Out-Patient_Imaging_Findings_-_Immediate_Medical_Care_SOP' from folder: Critical_Out-Patient_Imaging_Findings_-_Immediate_Medical_Care_SOP_20250409193528279122
2025-04-15 12:46:33,659 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 11
2025-04-15 12:46:33,660 - ydrpolicy.backend.database.init_db - INFO -   Split text into 5 chunks.
2025-04-15 12:46:33,660 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 5 texts
2025-04-15 12:46:34,048 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 5 embeddings
2025-04-15 12:46:34,049 - ydrpolicy.backend.database.init_db - INFO -   Generated 5 embeddings.
2025-04-15 12:46:34,063 - ydrpolicy.backend.database.init_db - INFO -   Added 5 PolicyChunk records.
2025-04-15 12:46:34,064 - ydrpolicy.backend.database.init_db - INFO - Processing new policy: 'YDR_Conflict_of_Interest_Policy' from folder: YDR_Conflict_of_Interest_Policy_20250409192856529523
2025-04-15 12:46:34,069 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Created Policy record ID: 12
2025-04-15 12:46:34,070 - ydrpolicy.backend.database.init_db - INFO -   Split text into 7 chunks.
2025-04-15 12:46:34,070 - ydrpolicy.backend.services.embeddings - INFO - Generating embeddings for 7 texts
2025-04-15 12:46:34,459 - ydrpolicy.backend.services.embeddings - INFO - Successfully generated 7 embeddings
2025-04-15 12:46:34,460 - ydrpolicy.backend.database.init_db - INFO -   Generated 7 embeddings.
2025-04-15 12:46:34,477 - ydrpolicy.backend.database.init_db - INFO -   Added 7 PolicyChunk records.
2025-04-15 12:46:34,478 - ydrpolicy.backend.database.init_db - INFO - Policy population finished. Processed/Updated: 12, Deleted old: 0, Skipped: 0
2025-04-15 12:46:34,481 - ydrpolicy.backend.database.init_db - INFO - User seeding and policy population committed.
2025-04-15 12:46:34,481 - ydrpolicy.backend.database.init_db - INFO - SUCCESS: Database initialization completed successfully.
2025-04-15 12:46:34,500 - ydrpolicy.backend.database.init_db - INFO - Database engine disposed.
2025-04-15 12:46:34,501 - ydrpolicy.backend.database - INFO - Database command finished.
2025-04-15 12:46:43,213 - ydrpolicy.backend.agent - INFO - Executing agent command...
2025-04-15 12:46:43,213 - ydrpolicy.backend.agent - INFO - Agent requested mode: API
2025-04-15 12:46:43,213 - ydrpolicy.backend.agent - INFO - MCP Tool Connection: Enabled
2025-04-15 12:46:43,213 - ydrpolicy.backend.agent - INFO - Starting agent via FastAPI server on 0.0.0.0:8000 (History Enabled)...
2025-04-15 12:46:43,436 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 12:46:43,437 - ydrpolicy.backend.api_main - INFO - FastAPI Application Startup Initiated...
2025-04-15 12:46:43,437 - ydrpolicy.backend.api_main - INFO - Mode: Production
2025-04-15 12:46:43,437 - ydrpolicy.backend.api_main - INFO - CORS Origins Allowed: ['http://localhost:3000']
2025-04-15 12:46:43,438 - ydrpolicy.backend.api_main - INFO - Verified required directories exist.
2025-04-15 12:46:43,438 - ydrpolicy.backend.api_main - INFO - FastAPI Application Startup Complete.
2025-04-15 12:46:43,438 - ydrpolicy.backend.api_main - INFO - ================================================================================
2025-04-15 12:46:55,451 - ydrpolicy.backend.database.engine - INFO - Creating new database engine
2025-04-15 12:46:55,471 - ydrpolicy.backend.database.engine - INFO - Database engine created successfully
2025-04-15 12:46:55,472 - ydrpolicy.backend.routers.auth - INFO - Attempting login for user: testuser1@example.com
2025-04-15 12:46:55,693 - ydrpolicy.backend.routers.auth - INFO - Login successful, token created for user: testuser1@example.com
2025-04-15 12:47:13,267 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 12:47:13,273 - ydrpolicy.backend.routers.chat - WARNING - User ID mismatch: Token user ID 2 != Request body user ID 1
2025-04-15 12:47:23,839 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 12:47:23,841 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 0: Hi this is pouria...
2025-04-15 12:47:23,843 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 0, message: 'Hi this is pouria...'
2025-04-15 12:47:23,844 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 12:47:23,845 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 12:47:23,845 - ydrpolicy.backend.agent.mcp_connection - WARNING - MCP Host 0.0.0.0 detected, using 'localhost' for client connection.
2025-04-15 12:47:23,846 - ydrpolicy.backend.agent.mcp_connection - INFO - Initializing MCP Server connection to: http://localhost:8001/sse
2025-04-15 12:47:23,847 - ydrpolicy.backend.agent.mcp_connection - INFO - MCPServerSse instance created.
2025-04-15 12:47:23,847 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 12:47:23,848 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 12:47:23,849 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 12:47:23,885 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 12:47:23,885 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'Hi this is pouria'.
2025-04-15 12:47:23,892 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 1 for user ID 2.
2025-04-15 12:47:23,893 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 1 for user 2.
2025-04-15 12:47:23,908 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 1
2025-04-15 12:47:29,652 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 1.
2025-04-15 12:47:29,659 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 1
2025-04-15 12:47:29,670 - ydrpolicy.backend.routers.chat - INFO - API: Finished streaming response for user 2, chat new.
2025-04-15 12:47:46,738 - ydrpolicy.backend.services.chat_service - INFO - ChatService initialized (MCP Enabled: True)
2025-04-15 12:47:46,741 - ydrpolicy.backend.routers.chat - INFO - API: Received chat stream request for user 2 (authenticated), chat 0: What is the department policy on shift change during busy hours?...
2025-04-15 12:47:46,743 - ydrpolicy.backend.services.chat_service - INFO - Processing message stream for user 2, chat 0, message: 'What is the department policy on shift change during busy hours?...'
2025-04-15 12:47:46,744 - ydrpolicy.backend.services.chat_service - INFO - Initializing Policy Agent for ChatService...
2025-04-15 12:47:46,744 - ydrpolicy.backend.agent.policy_agent - INFO - Creating Policy Agent (MCP Enabled: True)...
2025-04-15 12:47:46,745 - ydrpolicy.backend.agent.policy_agent - INFO - MCP server configured for the agent.
2025-04-15 12:47:46,746 - ydrpolicy.backend.agent.policy_agent - INFO - SUCCESS: Policy Agent instance created successfully.
2025-04-15 12:47:46,746 - ydrpolicy.backend.services.chat_service - INFO - Policy Agent initialized successfully in ChatService.
2025-04-15 12:47:46,780 - ydrpolicy.backend.services.chat_service - INFO - API Mode: MCP connection established via async context.
2025-04-15 12:47:46,780 - ydrpolicy.backend.database.repository.chats - INFO - Creating new chat for user ID 2 with title 'What is the department policy on shift change during busy hours?'.
2025-04-15 12:47:46,784 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully created chat ID 2 for user ID 2.
2025-04-15 12:47:46,784 - ydrpolicy.backend.services.chat_service - INFO - Created new chat ID 2 for user 2.
2025-04-15 12:47:46,797 - ydrpolicy.backend.services.chat_service - INFO - Agent updated to: YDR Policy Assistant in chat 2
2025-04-15 12:48:29,019 - ydrpolicy.backend.mcp.server - INFO - Received find_similar_chunks request: query='department policy on shift change during busy hour...', k=5, threshold=None
2025-04-15 12:48:29,558 - ydrpolicy.backend.database.repository.policies - INFO - Performing vector-only search with limit=5, threshold=0.2
2025-04-15 12:48:29,595 - ydrpolicy.backend.mcp.server - INFO - Found 5 similar chunks.
2025-04-15 12:48:29,619 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: find_similar_chunks in chat 2
2025-04-15 12:48:29,620 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 2
2025-04-15 12:48:29,632 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 2
2025-04-15 12:48:37,957 - ydrpolicy.backend.mcp.server - INFO - Received get_policy_from_ID request for policy_id: 7
2025-04-15 12:48:38,006 - ydrpolicy.backend.services.chat_service - INFO - Agent calling tool: get_policy_from_ID in chat 2
2025-04-15 12:48:38,006 - ydrpolicy.backend.services.chat_service - WARNING - ToolCallOutputItem missing tool_call_id for chat 2
2025-04-15 12:48:38,018 - ydrpolicy.backend.services.chat_service - INFO - Tool output received for chat 2
2025-04-15 12:49:40,833 - ydrpolicy.backend.services.chat_service - INFO - Agent stream completed successfully for chat 2.
2025-04-15 12:49:40,842 - ydrpolicy.backend.services.chat_service - INFO - Sending final status 'complete' for chat 2
2025-04-15 12:49:40,855 - ydrpolicy.backend.routers.chat - INFO - API: Finished streaming response for user 2, chat new.
2025-04-15 12:50:00,656 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:50:14,957 - ydrpolicy.backend.routers.chat - INFO - API: User 2 attempting to rename chat 1 to 'Greeting'.
2025-04-15 12:50:14,958 - ydrpolicy.backend.database.repository.chats - INFO - Attempting to update title for chat ID 1 (user ID 2) to 'Greeting'.
2025-04-15 12:50:14,964 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully updated title for chat ID 1.
2025-04-15 12:50:20,254 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:50:34,245 - ydrpolicy.backend.routers.chat - INFO - API: User 2 attempting to archive chat 1.
2025-04-15 12:50:34,249 - ydrpolicy.backend.database.repository.chats - INFO - Attempting to archive chat ID 1 (user ID 2).
2025-04-15 12:50:34,253 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully archived chat ID 1.
2025-04-15 12:50:40,157 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:50:55,301 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list archived chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:51:11,958 - ydrpolicy.backend.routers.chat - INFO - API: User 2 attempting to unarchive chat 1.
2025-04-15 12:51:11,961 - ydrpolicy.backend.database.repository.chats - INFO - Attempting to unarchive chat ID 1 (user ID 2).
2025-04-15 12:51:11,967 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Successfully unarchived chat ID 1.
2025-04-15 12:51:23,109 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:51:40,845 - ydrpolicy.backend.routers.chat - WARNING - API: User 2 attempting to archive ALL active chats.
2025-04-15 12:51:40,846 - ydrpolicy.backend.database.repository.chats - WARNING - Attempting to archive ALL active chats for user ID 2.
2025-04-15 12:51:40,851 - ydrpolicy.backend.database.repository.chats - INFO - SUCCESS: Archived 2 chats for user ID 2.
2025-04-15 12:51:48,989 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list active chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 12:51:53,650 - ydrpolicy.backend.routers.chat - INFO - API: Received request to list archived chats for user 2 (authenticated) (skip=0, limit=100).
2025-04-15 17:40:52,227 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 17:40:52,228 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 17:40:52,232 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 17:40:52,232 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 17:40:55,220 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 17:40:55,221 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
2025-04-15 17:41:16,216 - ydrpolicy.backend.utils.auth_utils - WARNING - Token has expired.
2025-04-15 17:41:16,217 - ydrpolicy.backend.dependencies - WARNING - Token decoding failed or token expired.
